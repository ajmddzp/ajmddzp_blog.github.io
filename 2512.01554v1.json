{
    "id": "2512.01554v1",
    "title": "L2M-Calib: One-key Calibration Method for LiDAR and Multiple Magnetic Sensors",
    "authors": [
        "Qiyang Lyu",
        "Wei Wang",
        "Zhenyu Wu",
        "Hongming Shen",
        "Huiqin Zhou",
        "Danwei Wang"
    ],
    "abstract": "å¤šæ¨¡æ€ä¼ æ„Ÿå™¨èåˆé€šè¿‡åˆ©ç”¨å¼‚æ„ä¼ æ„Ÿæ¨¡æ€é—´çš„äº’è¡¥ä¿¡æ¯ï¼Œå®ç°äº†é²æ£’çš„ç¯å¢ƒæ„ŸçŸ¥èƒ½åŠ›ã€‚ç„¶è€Œï¼Œç²¾ç¡®çš„æ ‡å®šæ˜¯å®ç°æœ‰æ•ˆèåˆçš„å…³é”®å‰æã€‚æœ¬æ–‡é’ˆå¯¹ç£åŠ›è®¡-æ¿€å…‰é›·è¾¾èåˆç³»ç»Ÿï¼Œæå‡ºäº†ä¸€ç§åä¸ºL2M-Calibçš„ä¸€é”®å¼æ ‡å®šæ¡†æ¶ï¼Œå¯åŒæ­¥ä¼°è®¡ä¸¤ç±»ä¼ æ„Ÿå™¨ä¹‹é—´çš„å¤–å‚å˜æ¢å…³ç³»ä»¥åŠç£åŠ›è®¡çš„å†…å‚ç•¸å˜å‚æ•°ã€‚ç£åŠ›ä¼ æ„Ÿå™¨èƒ½å¤Ÿæ•æ‰ç¯å¢ƒç£åœºæ¨¡å¼ï¼Œè¯¥æ¨¡å¼å¯¹å‡ ä½•ç»“æ„ã€çº¹ç†ã€å…‰ç…§åŠå¤©æ°”æ¡ä»¶å…·æœ‰ä¸å˜æ€§ï¼Œä½¿å…¶åœ¨å¤æ‚ç¯å¢ƒä¸­å…·æœ‰ç‹¬ç‰¹ä¼˜åŠ¿ã€‚ç„¶è€Œï¼Œç”±äºç¼ºä¹æœ‰æ•ˆçš„æ ‡å®šæŠ€æœ¯ï¼Œç£ä¼ æ„Ÿåœ¨å¤šæ¨¡æ€ç³»ç»Ÿä¸­çš„é›†æˆåº”ç”¨ä»æœªå¾—åˆ°å……åˆ†æ¢ç´¢ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨è¿­ä»£é«˜æ–¯-ç‰›é¡¿æ³•ä¼˜åŒ–å¤–å‚ï¼ŒåŒæ—¶å°†å†…å‚æ ‡å®šæ„å»ºä¸ºåŠ æƒå²­æ­£åˆ™åŒ–æ€»ä½“æœ€å°äºŒä¹˜é—®é¢˜ï¼Œä»è€Œç¡®ä¿ç®—æ³•å¯¹æµ‹é‡å™ªå£°å’Œç—…æ€æ•°æ®å…·æœ‰é²æ£’æ€§ã€‚é€šè¿‡åœ¨ä»¿çœŸæ•°æ®é›†å’ŒçœŸå®åœºæ™¯ï¼ˆåŒ…æ‹¬è‡ªåŠ¨å¯¼å¼•è½¦æ­è½½çš„ä¼ æ„Ÿå™¨é…ç½®ï¼‰ä¸Šçš„å¤§é‡å®éªŒè¯„ä¼°è¡¨æ˜ï¼Œè¯¥æ–¹æ³•åœ¨å„ç§ç¯å¢ƒå’Œæ“ä½œæ¡ä»¶ä¸‹å‡èƒ½å®ç°é«˜ç²¾åº¦çš„æ ‡å®šç»“æœä¸ä¼˜å¼‚çš„é²æ£’æ€§ã€‚",
    "url": "https://arxiv.org/abs/2512.01554v1",
    "html_url": "https://arxiv.org/html/2512.01554v1",
    "html_content": "L2M-Calib\n: One-key Calibration Method for LiDAR and Multiple Magnetic Sensors\nQiyang Lyu, Wei Wang, Zhenyu Wu\nâˆ—\n, Hongming Shen, Huiqin Zhou,\nand Danwei Wang\nThis research is supported by the National Research Foundation, Singapore, under the NRF Medium Sized Centre scheme (CARTIN). Any opinions, findings and conclusions or recommendations expressed in this material are those of the author(s) and do not reflect the views of National Research Foundation, Singapore.All authors are with the School of Electrical and Electronic Engineering, Nanyang Technological University, Singapore\n{zhenyu002}@e.ntu.edu.sg*Corresponding author\nAbstract\nMultimodal sensor fusion enables robust environmental perception by leveraging complementary information from heterogeneous sensing modalities. However, accurate calibration is a critical prerequisite for effective fusion. This paper proposes a novel one-key calibration framework named\nL2M-Calib\nfor a fused magnetic-LiDAR system, jointly estimating the extrinsic transformation between the two kinds of sensors and the intrinsic distortion parameters of the magnetic sensors. Magnetic sensors capture ambient magnetic field (AMF) patterns, which are invariant to geometry, texture, illumination, and weather, making them suitable for challenging environments. Nonetheless, the integration of magnetic sensing into multimodal systems remains underexplored due to the absence of effective calibration techniques. To address this, we optimize extrinsic parameters using an iterative Gauss-Newton scheme, coupled with the intrinsic calibration as a weighted ridge-regularized total least squares (w-RRTLS) problem, ensuring robustness against measurement noise and ill-conditioned data. Extensive evaluations on both simulated datasets and real-world experiments, including AGV-mounted sensor configurations, demonstrate that our method achieves high calibration accuracy and robustness under various environmental and operational conditions.\nI\nIntroduction\nFigure 1\n:\nFusing magnetic sensor with LiDAR requires both the extrinsic parameters of\nğ‘\n,\nğ­\n\\mathbf{R,t}\n, and the intrinsic parameters of\nğ‚\n,\nğ‡\n\\mathbf{C,H}\ndescribing the distortion of magnetic sensorsâ€™ readings.\nğ\nm\n\\mathbf{B}_{\\mathrm{m}}\nand\nğ\nl\n\\mathbf{B}_{\\mathrm{l}}\nrefers to the magnetic readings under magnetic and LiDAR sensor frame, respectively.\nSensor fusion, which incorporates multimodal information into a unified perception system, has become an essential component in the development of autonomous ground vehicles (AGVs)\n[\n1\n,\n2\n]\n. Fused sensor data enhances the systemâ€™s ability to make informed decisions and provides robust performance in tasks such as simultaneous localization and mapping (SLAM)\n[\n3\n]\n, planning\n[\n4\n]\n, and navigation\n[\n5\n]\n. Existing sensor fusion approaches primarily fall into two categories: relying solely on onboard sensors (e.g., LiDAR, camera, thermal, radar)\n[\n6\n,\n7\n]\n, or integrating infrastructure-based beacons (e.g., UWB, Wi-Fi, Bluetooth, RFID)\n[\n8\n,\n9\n,\n10\n,\n11\n]\n. However, onboard sensor-only solutions can suffer from degraded or even failed performance in environments with ambiguous features. Meanwhile, beacon-based approaches often incur substantial deployment and maintenance costs.\nAmbient magnetic field (AMF) information offers a promising alternative for sensor fusion. AMF is an infrastructure-free naturally existing field, distorted locally by nearby ferromagnetic materials, resulting in location-specific features such as vector direction and intensity\n[\n12\n]\n. As ferromagnetic materials are typically built into environments and are not easily altered, the AMF signature remains relatively stable and informative even in visually repetitive or featureless environments like warehouses, tunnels, and seaports. This makes AMF especially advantageous under challenging conditions. Recent studies have increasingly focused on magnetic-field-guided perception\n[\n13\n,\n14\n]\nand demonstrated successful applications in AGV localization tasks\n[\n15\n,\n16\n,\n17\n]\n.\nLiDAR, on the other hand, has already been widely adopted in both industry and researches for autonomous systems\n[\n18\n,\n19\n,\n20\n]\n. LiDAR-based solutions consistently demonstrate high accuracy and reliability. Moreover, cross-sensor calibration methods have been developed for fusing LiDAR with various other sensors, such as LiDAR-camera\n[\n21\n]\n, LiDAR-GPS\n[\n22\n]\n, and LiDAR-IMU\n[\n23\n]\nsystems.\nGiven that magnetic sensors provide complementary information to LiDAR and offer unique advantages over other existing sensors, integrating them into a common system can enhance perception robustness. However, aligning their data streams poses significant challenges. In same-modality fusion, data often overlaps spatially, enabling straightforward correspondence establishment. In contrast, the magnetic-LiDAR system involves heterogeneous data modalities without overlapping fields of view. Moreover, raw magnetic sensor measurements are frequently distorted by ferromagnetic elements on the vehicle itself, causing dynamic environmental changes\n[\n24\n]\n. Although these distortions can be compensated through intrinsic calibration after sensor installation, pathological challenges arise when they are mounted on AGVs due to its limited maneuverability\n[\n25\n]\n.\nTo address these challenges, we propose a target-free, one-key extrinsic calibration method for magnetic-LiDAR systems, coupled with an intrinsic calibration method to correct carrier-induced magnetic distortions. The main contributions of this work are summarized as follows:\nâ€¢\nWe design a one-key calibration method that simultaneously estimates both the extrinsic and intrinsic parameters for magnetic-LiDAR fusion systems.\nâ€¢\nWe introduce a weighted optimization strategy specifically tailored for AGV applications to enhance the robustness of magnetic sensor intrinsic calibration.\nâ€¢\nWe propose a two-step optimization with Gauss-Newton iteration to effectively solve the extrinsic parameters between the magnetic and LiDAR systems.\nThe remainder of this paper is organized as follows: Section\nII\nreviews related work. Section\nIII\ndetails the proposed calibration methodology. Section\nIV\npresents experimental results and detailed analysis. Finally, Section\nV\nconcludes the paper.\nII\nRelated Works\nDue to the absence of prior research on extrinsic calibration between magnetic sensors and LiDAR, we first provide a brief review of existing calibration techniques for LiDAR with other sensors. Subsequently, we discuss the influence of intrinsic distortions in magnetic sensors on perception systems and corresponding calibration methods.\nII-A\nCalibration of LiDAR to other Sensors\nThe calibration of LiDAR to other sensors has been extensively studied. These methods can be broadly categorized into two groups.\nII-A1\nCalibration via Target-based Methods\nIn target-based calibration, both sensors operate in similar modalities, allowing them to observe the same physical target. A representative example is the work of Zhou et al.\n[\n26\n]\n, who proposed using a checkerboard for extrinsic calibration of the LiDAR-camera system. Subsequently, Jorge et al.\n[\n21\n]\nintroduced a four-hole board that improved detection robustness. Zhang et al.\n[\n27\n]\nfurther extended this concept for thermal camera-LiDAR calibration. In 2020, TÃ³th et al.\n[\n28\n]\nproposed using a spherical target, which was later adapted by Zhang et al.\n[\n29\n]\nfor long-baseline LiDAR-to-LiDAR calibration.\nII-A2\nCalibration via Trajectory-based Methods.\nWhen two sensors cannot directly observe the same target, calibration methods based on path or motion can be employed. For instance, Lv et al.\n[\n30\n]\nutilized continuous-time trajectories for calibrating LiDAR and IMU systems. Kim et al.\n[\n31\n]\nproposed a targetless calibration method for ground vehicles, leveraging relative poses constrained by Ground Plane Motion (GPM). Similarly, Chen et al.\n[\n32\n]\napplied hand-eye calibration techniques to estimate the extrinsic parameters between LiDAR and GPS systems.\nII-B\nCalibration of Magetic Sensorsâ€™ Distortion\nMost intrinsic calibration methods for magnetic sensors are based on the classic Tolles-Lawson (T-L) model\n[\n24\n]\n, which aims to estimate parameters that characterize measurement distortions.\nII-B1\nOrientation-independent Methods Using Magnetic Sensors Only\nGiven the linear nature of the T-L model, early approaches commonly applied Singular Value Decomposition (SVD)\n[\n33\n]\nor Least Squares (LS) fitting\n[\n34\n]\n. More recent studies have sought to improve upon these techniques. For instance, Chen et al.\n[\n35\n]\nemployed Total Least Squares (TLS) to account for errors in both the observation vector and the data matrix.\nNing et al.\n[\n25\n]\nfurther enhanced calibration accuracy under pathological conditions by introducing ridge regularization with L-curve based on TLS.\nII-B2\nOrientation-dependent Methods Using Auxiliary Sensors\nAlthough pure magnetic sensor-based calibration is effective, it often suffers from high computational cost and strict data collection requirements. To address these issues, auxiliary sensors are incorporated to improve calibration efficiency. For example, Kok et al.\n[\n36\n]\nutilized inertial sensors to refine orientation estimates and correct axis misalignment. Wu et al.\n[\n37\n]\nproposed a dynamic calibration method to minimize misalignment between sensors. Han et al.\n[\n38\n]\nadopted an Extended Kalman Filter to fuse gyroscope data, aligning the magnetometerâ€™s rotation with device motion. Similarly, Andel et al.\n[\n39\n]\nused GNSS-based motion vectors to calibrate magnetometers.\nExisting research faces several limitations. First, many methods assume that magnetic sensors can provide sufficient excitation, which fails on large or heavy platforms like AGVs with restricted motion, leading to poor data quality and unstable solutions. Second, the assumption of a spatially uniform magnetic field is invalid in environments like warehouses or tunnels, where ferromagnetic interference distorts the field, rendering single ellipsoid fitting ineffective. Third, filter-based approaches often require reliable initialization, which is unavailable in practical scenarios. To address these issues, we propose a new calibration method that avoids such assumptions and remains robust in complex magnetic environments.\nIII\nThe Proposed\nL2M-Calib\nMethod\nIII-A\nExtrinsic Model Formulation\nThe objective of the extrinsic calibration is to estimate the optimal rotation matrix\nğ‘\nm\nl\n\\mathbf{R}_{\\mathrm{m}}^{\\mathrm{l}}\nand translation vector\nğ­\nm\nl\n\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}}\n, from the magnetic sensor to the LiDAR frame (\ni.e.,\ncoordinate). This transformation is assumed to be rigid and fixed throughout the calibration process. To obtain reliable excitation data for calibration, the magnetic-LiDAR system is moved along one of various paths (some are illustrated in Fig.\n3\n) within a prebuilt multi-modal map shown in Fig.\n1\n. The prebuilt multi-modal map consists of both a magnetic field map\nğ•„\nâ€‹\n(\nğ‘\n,\nğ­\n)\n\\mathbb{M}(\\mathbf{R},\\mathbf{t})\nand a LiDAR point cloud map\nğ•ƒ\nâ€‹\n(\nğ‘\n,\nğ­\n)\n\\mathbb{L}(\\mathbf{R},\\mathbf{t})\n, both referenced in a common global frame. Suppose LiDAR-based localization on\nğ•ƒ\nâ€‹\n(\nğ‘\n,\nğ­\n)\n\\mathbb{L}(\\mathbf{R},\\mathbf{t})\nprovides a transformation\n(\nğ‘\nl\ne\n,\nğ­\nl\ne\n)\n(\\mathbf{R}_{\\mathrm{l}}^{\\mathrm{e}},\\mathbf{t}_{\\mathrm{l}}^{\\mathrm{e}})\nfrom the LiDAR frame to the global map frame, given this transformation, the corresponding magnetic sensor pose in the map frame can be derived via:\nğ‘\nâˆ—\n=\nğ‘\nl\ne\nğ‘\nm\nl\n,\nğ­\nâˆ—\n=\nğ‘\nl\ne\nğ­\nm\nl\n+\nğ­\nl\ne\n\\mathbf{R}_{*}=\\mathbf{R}_{\\mathrm{l}}^{\\mathrm{e}}\\mathbf{R}_{\\mathrm{m}}^{\\mathrm{l}},\\mathbf{t}_{*}=\\mathbf{R}_{\\mathrm{l}}^{\\mathrm{e}}\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}}+\\mathbf{t}\\mathrm{{}_{l}^{e}}\n.\nTo simplify the problem, we first consider the case where the rotation between the LiDAR and magnetic sensor frames is identity (\nğ‘\nm\nl\n=\nğˆ\nğŸ‘\n\\mathbf{R}_{\\mathrm{m}}^{\\mathrm{l}}=\\mathbf{I_{3}}\n) and the intrinsic distortion of the magnetic sensor is negligible. Under this assumption, the reference magnetic map readings under the magnetic sensor\nğ\nref\nm\n{}^{\\mathrm{ref}}\\mathbf{B}\\mathrm{{}_{m}}\nand LiDAR frame\nğ\nref\nl\n{}^{\\mathrm{ref}}\\mathbf{B}\\mathrm{{}_{l}}\nwould be equal:\nğ\nref\n=\nm\nğ•„\n(\nğ‘\nâˆ—\n,\nğ­\nâˆ—\n)\n=\n(\nğ‘\nm\nl\n)\nâˆ’\n1\nğ\nref\n=\nl\n(\nğ‘\nm\nl\n)\nâˆ’\n1\nğ•„\n(\nğ‘\nl\ne\n,\nğ­\nâˆ—\n)\n=\nğ•„\n(\nğ‘\nl\ne\n,\nğ‘\nl\ne\nğ­\nm\nl\n+\nğ­\n)\nl\ne\n{}^{\\mathrm{ref}}\\mathbf{B}\\mathrm{{}_{m}}=\\mathbb{M}(\\mathbf{R}_{\\mathrm{*}},\\mathbf{t}_{\\mathrm{*}})={(\\mathbf{R}_{\\mathrm{m}}^{\\mathrm{l}})}^{-1}{{}^{\\mathrm{ref}}}\\mathbf{B}\\mathrm{{}_{l}}={(\\mathbf{R}_{\\mathrm{m}}^{\\mathrm{l}})}^{-1}\\mathbb{M}(\\mathbf{R}_{\\mathrm{l}}^{\\mathrm{e}},\\mathbf{t}_{\\mathrm{*}})=\\mathbb{M}(\\mathbf{R}_{\\mathrm{l}}^{\\mathrm{e}},\\mathbf{R}_{\\mathrm{l}}^{\\mathrm{e}}\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}}+\\mathbf{t}\\mathrm{{}_{l}^{e}})\n.\nThe residual between the reference map value\nğ\nref\nm\n{}^{\\mathrm{ref}}\\mathbf{B}\\mathrm{{}_{m}}\nand the measured sensor reading\nğ\nmeas\nm\n{{}^{\\mathrm{meas}}}\\mathbf{B}\\mathrm{{}_{m}}\nunder magnetic sensor frame is thus\nğ\n(\nğ­\nm\nl\n)\n=\nğ•„\n(\nğ‘\nl\ne\n,\nğ‘\nl\ne\nğ­\nm\nl\n+\nğ­\n)\nl\ne\nâˆ’\nğ\nmeas\nm\n\\mathbf{e}(\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}})=\\mathbb{M}(\\mathbf{R}_{\\mathrm{l}}^{\\mathrm{e}},\\mathbf{R}_{\\mathrm{l}}^{\\mathrm{e}}\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}}+\\mathbf{t}\\mathrm{{}_{l}^{e}})-{{}^{\\mathrm{meas}}}\\mathbf{B}\\mathrm{{}_{m}}\n(1)\nand the optimal translation\nğ­\nm\nl\n\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}}\nis found by minimizing the squared residual:\nğ­\nm\nl\n:=\narg\nâ¡\nmin\nğ­\nm\nl\nâ€‹\nâ€–\nğ\nâ€‹\n(\nğ­\nm\nl\n)\nâ€–\n2\n\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}}:=\\underset{\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}}}{\\arg\\min}\\|\\mathbf{e}(\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}})\\|^{2}\n(2)\nIII-B\nPrebuilt Multimodal Magnetic-LiDAR Map\nDue to the non-uniformity of the AMF, we adopt our previous sliding Gaussian Process Regression (s-GPR) method\n[\n40\n]\nto construct the magnetic map\n[\n41\n]\nalongside a LiDAR map. A mapping sensor suite\n[\n42\n]\nwith known extrinsic calibration traverses the environment to collect magnetic and LiDAR data. A LiDAR-based SLAM framework estimates the trajectory, while the corresponding magnetic readings are associated with these odometry poses, forming magnetic fingerprints. According to\n[\n40\n]\n, the magnetic field at any spatial location is modeled as a Gaussian Process:\nf\n(\nğ­\n)\nâˆ¼\nğ’¢\nğ’«\n(\nm\n(\nğ­\n)\n,\nk\n(\nğ­\np\n,\nğ­\nq\n)\n)\n,\nğ\n=\ne\ni\nf\n(\nğ­\ni\n)\n+\nÏµ\n\\begin{split}f(\\mathbf{t}){\\,}{\\sim}{\\,}\\mathcal{GP}{({m(\\mathbf{t}),k(\\mathbf{t}_{p},\\mathbf{t}_{q}))}},\\ \\ \\ \\mathbf{B}\\mathrm{{}_{e}^{i}}=f(\\mathbf{t}_{i})+\\epsilon\\end{split}\n(3)\nwhere\nğ\n=\ne\ni\nğ•„\n(\nğˆ\nğŸ‘\n,\nğ­\ni\n)\n\\mathbf{B}\\mathrm{{}_{e}^{i}}=\\mathbb{M}(\\mathbf{I_{3}},\\mathbf{t}_{i})\nis the\ni\nth\ni^{\\mathrm{th}}\nsampled magnetic readings under the global map frame. Then, the posterior distribution over\nf\nâ€‹\n(\nğ­\n)\nf(\\mathbf{t})\nat an arbitrary point\nğ­\nâˆ—\n\\mathbf{t}_{*}\ncan be predicted\np\n(\nf\n(\nğ­\nâˆ—\n)\n|\nğ­\nâˆ—\n,\nğ­\n,\nğ\n)\ne\n=\nğ’©\n(\nğ”¼\n[\nğ\n]\ne\nâˆ—\n,\nvar\n(\nğ\n)\ne\nâˆ—\n)\np({f(\\mathbf{t}_{*})}|{\\,}{\\mathbf{t}_{*}},\\mathbf{t},\\mathbf{B}\\mathrm{{}_{e}})=\\mathcal{N}{{\\big({{{\\mathbb{E}}[\\mathbf{B}\\mathrm{{}_{e}^{*}}]},\\operatorname*{var}(\\mathbf{B}\\mathrm{{}_{e}^{*}})\\big)}}}\n(4)\nwith:\nğ”¼\n[\nğ\ne\nâˆ—\n]\n=\nm\n(\nğ­\nâˆ—\n)\n+\nğ¤\nâˆ—\nâŠ¤\n(\nğŠ\n+\nÏƒ\nn\n2\nI\nn\n)\nâˆ’\n1\n(\nğ\nâˆ’\ne\nm\n(\nğ­\n)\n)\n{{\\mathbb{E}}[\\mathbf{B}_{e}^{*}]}=m(\\mathbf{t}_{*})+{\\mathbf{k}_{*}^{\\top}}{\\big(\\mathbf{K}+{\\sigma}_{n}^{2}{I_{n}}\\big)}^{-1}(\\mathbf{B}\\mathrm{{}_{e}}-m(\\mathbf{t}))\n(5)\nvar\n(\nğ\ne\nâˆ—\n)\n=\nk\nâ€‹\n(\nğ­\nâˆ—\n,\nğ­\nâˆ—\n)\nâˆ’\nğ¤\nâˆ—\nâŠ¤\nâ€‹\n(\nğŠ\n+\nÏƒ\nn\n2\nâ€‹\nI\nn\n)\nâˆ’\n1\nâ€‹\nğ¤\nâˆ—\n\\operatorname*{var}(\\mathbf{B}_{e}^{*})=k({\\mathbf{t}_{*}},{\\mathbf{t}_{*}})-{\\mathbf{k}_{*}^{\\top}}{\\big(\\mathbf{K}+{\\sigma}_{n}^{2}{I_{n}}\\big)}^{-1}{\\mathbf{k}_{*}}\n(6)\nwhere\nğ•„\nâ€‹\n(\nğˆ\nğŸ‘\n,\nğ­\nâˆ—\n)\n=\nğ”¼\nâ€‹\n[\nğ\ne\nâˆ—\n]\n\\mathbb{M}(\\mathbf{I_{3}},\\mathbf{t}_{*})={{\\mathbb{E}}[\\mathbf{B}_{e}^{*}]}\n. To improve computational efficiency, the entire map is partitioned into sub-blocks, with each block interpolated using only nearby training samples.\nIII-C\nMagnetic Sensor Intrinsic Compensation\nIn real-world deployments, magnetic sensors are typically mounted on platforms with ferromagnetic components, leading to sensor distortions. Additionally, misalignment may exist between the LiDAR and magnetic axes. To address these issues, we incorporate both intrinsic distortion and rotation\nğ‘\nm\nl\n\\mathbf{R}_{\\mathrm{m}}^{\\mathrm{l}}\nback into the calibration model.\nIII-C1\nIntrinsic Model Formulation\nFollowing the Tolles-Lawson (T-L) model\n[\n24\n]\n, the distortion sources include: (1) permanent magnetism, (2) soft iron interference, and (3) eddy current effects (neglected in this scenario\n[\n43\n]\n). The complete compensation model becomes:\nmeas\nğ\nm\n=\nğ’ğ‚\nN\nâ€‹\nO\n(\nğ‘\nm\nl\n)\nâˆ’\n1\n(\nğŠ\nğ\nl\nref\n+\nğ\nh\n)\n+\nğ\nO\n^{\\mathrm{meas}}\\mathbf{B}_{\\mathrm{m}}=\\mathbf{SC}_{NO}{(\\mathbf{R}_{\\mathrm{m}}^{\\mathrm{l}})}^{-1}(\\mathbf{K}{{}^{\\mathrm{ref}}}\\mathbf{B}_{\\mathrm{l}}+\\mathbf{B}_{\\mathrm{h}})+\\mathbf{B}_{\\mathrm{O}}\n(7)\nwhere\nğ\nmeas\nm\n{}^{\\mathrm{meas}}\\mathbf{B}\\mathrm{{}_{m}}\nand\nğ\nref\nl\n{}^{\\mathrm{ref}}\\mathbf{B}\\mathrm{{}_{l}}\nare the magnetic readings in the magnetic sensorsâ€™ frame and the reference magnetic field in the LiDAR frame;\nğ’\n\\mathbf{S}\n,\nğ‚\nNO\nâˆˆ\nâ„\n3\nÃ—\n3\n\\mathbf{C}_{\\mathrm{NO}}\\in\\mathbb{R}^{3\\times 3}\nand\nğ\nO\nâˆˆ\nâ„\n3\n\\mathbf{B}_{\\mathrm{O}}\\in\\mathbb{R}^{3}\nare the scaling of the magnetic sensor readings for each axis, the non-orthogonality among different axes, and the offset of the origin, respectively;\nğŠ\nâˆˆ\nâ„\n3\nÃ—\n3\n\\mathbf{K}\\in\\mathbb{R}^{3\\times 3}\nand\nğ\nh\nâˆˆ\nâ„\n3\n\\mathbf{B}_{\\mathrm{h}}\\in\\mathbb{R}^{3}\nare the soft iron effect led by temporary magnetization and hard iron effect led by the permanent magnetization of ferromagnetic materials. Eq.\n7\ncan be simplified into linear form:\nğ\nm\n=\nğ‚ğ\nl\n+\nğ‡\n\\mathbf{B}_{\\mathrm{m}}=\\mathbf{C}\\mathbf{B}_{\\mathrm{l}}+\\mathbf{H}\\\\\n(8)\nwhere\nğ\nm\n,\nğ\nl\n\\mathbf{B}_{\\mathrm{m}},\\mathbf{B}_{\\mathrm{l}}\nis simplified from\nğ\nmeas\n,\nm\nğ\nref\nl\n{}^{\\mathrm{meas}}\\mathbf{B}\\mathrm{{}_{m}},{{}^{\\mathrm{ref}}}\\mathbf{B}\\mathrm{{}_{l}}\n. Given\nN\n>\n4\nN>4\nmagnetic reading pairs\n(\nğ\nm\ni\n,\nğ\nl\ni\n)\ni\n=\n1\nN\n{(\\mathbf{B}_{\\mathrm{m}}^{i},\\mathbf{B}_{\\mathrm{l}}^{i})}_{i=1}^{N}\n, parameters\nğ‚\nâˆˆ\nâ„\n3\nÃ—\n3\n\\mathbf{C}\\in\\mathbb{R}^{3\\times 3}\nand\nğ‡\nâˆˆ\nâ„\n3\n\\mathbf{H}\\in\\mathbb{R}^{3}\ncan be estimated via linear regression.\nIII-C2\nLinear Regression under Pathological Situation\nTo account for noise in both measurements and system matrix, we adopt the Total Least Squares (TLS):\nğ\n+\nm\nğ…\n=\n(\nğ\n+\nl\nğ„\n)\nğ€\nâŠ¤\n\\mathbf{B}\\mathrm{{}_{m}}+\\mathbf{F}=(\\mathbf{B}\\mathrm{{}_{l}}+\\mathbf{E})\\mathbf{A}^{\\top}\n(9)\nwhere\nğ€\n=\n[\nğ‚\nâ€‹\nğ‡\n]\n\\mathbf{A}=[\\mathbf{C}~~\\mathbf{H}]\n, and with objective:\narg\nâ¡\nmin\nğ€\n,\nğ„\n,\nğ…\nâ¡\nâ€–\n[\nğ„\nâ€‹\nğ…\n]\nâ€–\nF\n2\n\\arg\\min_{\\mathbf{A,E,F}}\\|[\\mathbf{E}~~\\mathbf{F}]\\|^{2}_{\\mathrm{F}}\n(10)\nwhere\nâˆ¥\nâ‹…\nâˆ¥\nF\n\\|\\cdot\\|_{\\mathrm{F}}\nis Frobenius norm. TLS is solved via truncated SVD on the extended matrix\nğ†\n=\n[\nğ\nm\nâ€‹\nğ\nl\n]\n\\mathbf{G}=[\\mathbf{B}_{\\mathrm{m}}\\ \\mathbf{B}_{\\mathrm{l}}]\n, retaining dominant components. The reconstructed extension matrix after truncation is\nğ†\nÂ¯\n=\n[\nğ\nÂ¯\nğ\nÂ¯\ne\n]\nl\n=\nğ”\nÂ¯\nğ’\nÂ¯\nğ•\nÂ¯\nT\n\\bar{\\mathbf{G}}=[\\bar{\\mathbf{B}}\\mathrm{{}_{e}}~~\\bar{\\mathbf{B}}\\mathrm{{}_{l}}]=\\bar{\\mathbf{U}}\\bar{\\mathbf{S}}\\bar{\\mathbf{V}}^{T}\n.\nWhen sensor motion is constrained (e.g., mounted on grounded vehicles), observation matrices become ill-conditioned. To improve robustness, regularization is introduced\n[\n25\n]\n:\narg\nmin\nğ€\nâˆ¥\nğ\nÂ¯\nğ€\nâŠ¤\nl\nâˆ’\nğ\nÂ¯\nâˆ¥\n2\nm\n+\nÎ»\n2\nâˆ¥\nğ\nÂ¯\nâˆ¥\n2\nl\n\\arg\\min_{\\mathbf{A}}\\|\\bar{\\mathbf{B}}\\mathrm{{}_{l}}\\mathbf{A}^{\\top}-\\bar{\\mathbf{B}}\\mathrm{{}_{m}}\\|^{2}+\\lambda^{2}\\|\\bar{\\mathbf{B}}\\mathrm{{}_{l}}\\|^{2}\n(11)\nwhere\nÎ»\n\\lambda\nis the regularization factor.\nIII-C3\nWeighted Regression based on Magnetic Map\nIn Section\nIII-B\n, the magnetic map is built with Gaussian Process. And in Eq.\n6\n, the variance\nvar\nâ€‹\n(\nğ\ne\nâˆ—\n)\n\\mathrm{var}(\\mathbf{B}_{\\mathrm{e}}^{*})\nat the interpolated points\nğ­\nâˆ—\n\\mathbf{t}_{*}\ncan be obtained in addition to the predicted value.\nThe variance from the GP map reflects prediction confidence.\nğ–\n=\ndiag\n(\nvar\n(\nğ\n)\ne\nâˆ—\n)\nâˆ’\n1\n\\mathbf{W}={\\operatorname{diag}(\\operatorname{var}(\\mathbf{B}\\mathrm{{}_{e}^{*}}))}^{-1}\n(12)\nThis leads to a weighted ridge-regularized TLS formulation:\narg\nmin\nğ€\nâˆ¥\nğ–\n(\nğ\nÂ¯\nğ€\nâŠ¤\nl\nâˆ’\nğ\nÂ¯\n)\nm\nâˆ¥\n2\n+\nÎ»\n2\nâˆ¥\nğ\nÂ¯\nâˆ¥\n2\nl\n\\arg\\min_{\\mathbf{A}}\\|\\mathbf{W}(\\bar{\\mathbf{B}}\\mathrm{{}_{l}}\\mathbf{A}^{\\top}-\\bar{\\mathbf{B}}\\mathrm{{}_{m}})\\|^{2}+\\lambda^{2}\\|\\bar{\\mathbf{B}}\\mathrm{{}_{l}}\\|^{2}\n(13)\nwith the closed-form solution:\nğ€\nw\nâˆ’\nRRTLS\n=\nğ\nÂ¯\nğ–\nâŠ¤\nm\nâŠ¤\nğ–\nğ\nÂ¯\n(\nğ\nÂ¯\nğ–\nâŠ¤\nl\nâŠ¤\nğ–\nğ\nÂ¯\n+\nl\nÎ»\nğˆ\n)\nâˆ’\n1\nl\n\\mathbf{A}_{\\mathrm{w-RRTLS}}=\\bar{\\mathbf{B}}\\mathrm{{}_{m}}^{\\top}\\mathbf{W}^{\\top}\\mathbf{W}\\bar{\\mathbf{B}}\\mathrm{{}_{l}}(\\bar{\\mathbf{B}}\\mathrm{{}_{l}}^{\\top}\\mathbf{W}^{\\top}\\mathbf{W}\\bar{\\mathbf{B}}\\mathrm{{}_{l}}+\\lambda\\mathbf{I})^{-1}\n(14)\nIII-C4\nJoint Parameters Optimization\nSubstituting Eq. (\n8\n) into the residual model Eq. (\n1\n) yields:\nğ\n(\nğ‚\n,\nğ‡\n,\nğ­\n)\nm\nl\n=\nğ‚\nğ•„\n(\nğ‘\n,\nl\ne\nğ‘\nl\ne\nğ­\nm\nl\n+\nğ­\n)\nl\ne\n+\nğ‡\nâˆ’\nğ\nm\n\\mathbf{e(C,H,}\\mathbf{t}\\mathrm{{}_{m}^{l}})=\\mathbf{C}\\mathbb{M}(\\mathbf{R}\\mathrm{{}_{l}^{e}},\\mathbf{R}_{\\mathrm{l}}^{\\mathrm{e}}\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}}+\\mathbf{t}\\mathrm{{}_{l}^{e}})+\\mathbf{H}-\\mathbf{B}_{\\mathrm{m}}\n(15)\nNote that the solution of the extrinsic parameter\nğ‘\nm\nl\n\\mathbf{R}\\mathrm{{}_{m}^{l}}\nhas been implictly included in the parameter\nğ‚\n\\mathbf{C}\nand can be directly obtained via the closed form solution given a specific\nğ­\nm\nl\n\\mathbf{t}\\mathrm{{}_{m}^{l}}\nwith Eq.\n14\n. The optimization is then simplified to solely rely on the extrinsic parameter\nğ­\nl\nm\n\\mathbf{t}\\mathrm{{}_{l}^{m}}\n, with the target loss function of Eq.\n2\n. To find the optimal\nğ­\nl\nm\n\\mathbf{t}\\mathrm{{}_{l}^{m}}\n, Gauss-Newton optimization is utilized. The corresponding Jacobian matrix with reference to\nğ­\nl\nm\n\\mathbf{t}\\mathrm{{}_{l}^{m}}\ncan be calculated as:\nğ‰\n(\nğ­\nm\nl\n)\n=\nâˆ‚\nğ\nâˆ‚\nğ­\nm\nl\n=\nğ‘\nl\ne\nğ‚\nâˆ‡\nğ•„\n(\nğ‘\n,\nl\ne\nğ‘\nl\ne\nğ­\nm\nl\n+\nğ­\n)\nl\ne\n\\mathbf{J}(\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}})=\\frac{\\partial{\\mathbf{e}}}{\\partial{\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}}}}=\\mathbf{R}_{\\mathrm{l}}^{\\mathrm{e}}\\mathbf{C}\\nabla\\mathbb{M}(\\mathbf{R}\\mathrm{{}_{l}^{e}},\\mathbf{R}_{\\mathrm{l}}^{\\mathrm{e}}\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}}+\\mathbf{t}\\mathrm{{}_{l}^{e}})\n(16)\nand the resulting incrementals of\nğ­\nm\nl\n\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}}\nat each step can be solved using:\nğ‰\nâ€‹\n(\nğ­\nm\nl\n)\nâŠ¤\nâ€‹\nğ‰\nâ€‹\n(\nğ­\nm\nl\n)\nâ€‹\nÎ”\nâ€‹\nğ­\n=\nâˆ’\nğ‰\nâ€‹\n(\nğ­\nm\nl\n)\nâ€‹\nğ\nâ€‹\n(\nğ­\nm\nl\n)\n\\mathbf{J}(\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}})^{\\top}\\mathbf{J}(\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}})\\Delta{\\mathbf{t}}=-\\mathbf{J}(\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}})\\mathbf{e}(\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}})\n(17)\nwhich eventually led to a two-step stochastic optimization problem that enables one-key joint calibration of both intrinsic and extrinsic parameters across multiple magnetic sensors.\nAlgorithm 1\nOne-key Calibration Algorithm for Both Extrinsic and Intrinsic Parameters\n1:\nğ­\n0\nâ†\n[\n0\n,\n0\n,\n0\n]\n,\nmaxIteration\n=\n100\n\\mathbf{t}_{0}\\leftarrow[0,0,0],\\mathrm{maxIteration}=100\n2:\nfor\nk\n<\nmaxIteration\nk<\\mathrm{maxIteration}\ndo\n3:\nProject magnetic sensors to map positions:\nğ­\nâˆ—\n=\nğ‘\nl\ne\nğ­\nm\nl\n+\nğ­\nl\ne\n\\mathbf{t}_{*}=\\mathbf{R}_{\\mathrm{l}}^{\\mathrm{e}}\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}}+\\mathbf{t}\\mathrm{{}_{l}^{e}}\n4:\nGet reference magnetic map value:\n[\nğ”¼\nâ€‹\n[\nğ\ne\nâˆ—\n]\n,\nvar\nâ€‹\n[\nğ\ne\nâˆ—\n]\n]\n[{{\\mathbb{E}}[\\mathbf{B}_{e}^{*}]},{{\\mathrm{var}}[\\mathbf{B}_{e}^{*}]}]\n,\nğ•„\nâ€‹\n(\nğˆ\nğŸ‘\n,\nğ­\nâˆ—\n)\n=\nğ”¼\nâ€‹\n[\nğ\ne\nâˆ—\n]\n\\mathbb{M}(\\mathbf{I_{3}},\\mathbf{t}_{*})={{\\mathbb{E}}[\\mathbf{B}_{e}^{*}]}\n5:\nRotate back to the LiDAR sensorâ€™s frame:\nğ\nl\n=\n(\nğ‘\nl\ne\n)\nâˆ’\n1\nâ€‹\nğ\ne\nâˆ—\n=\nğ•„\nâ€‹\n(\nğ‘\nl\ne\n,\nğ­\nâˆ—\n)\n\\mathbf{B}_{\\mathrm{l}}={(\\mathbf{R}_{\\mathrm{l}}^{\\mathrm{e}})}^{-1}\\mathbf{B}_{\\mathrm{e}}^{*}=\\mathbb{M}(\\mathbf{R}_{\\mathrm{l}}^{\\mathrm{e}},\\mathbf{t}_{*})\n6:\nğ—\nâ†\nğ\nl\nâˆ—\n,\nğ˜\nâ†\nğ\nm\n,\nğ–\nâ†\ndiag\n(\nvar\n(\nğ\n)\ne\nâˆ—\n)\nâˆ’\n1\n\\mathbf{X}\\leftarrow\\mathbf{B}_{\\mathrm{l}}^{*},\\mathbf{Y}\\leftarrow\\mathbf{B}_{\\mathrm{m}},\\mathbf{W}\\leftarrow{\\operatorname{diag}(\\operatorname{var}(\\mathbf{B}\\mathrm{{}_{e}^{*}}))}^{-1}\n7:\nSolve intrinsic parameters:\n[\nğ‚\nâ€‹\nğ‡\n]\nâ†\nğ€\nW\nâˆ’\nRRTLS\n[\\mathbf{C}~~\\mathbf{H}]\\leftarrow\\mathbf{A}_{\\mathrm{W-RRTLS}}\n8:\nCalculate cost function:\nğ\n(\nğ‚\n,\nğ‡\n,\nğ­\n)\nm\nl\n\\mathbf{e(C,H,}\\mathbf{t}\\mathrm{{}_{m}^{l}})\n9:\nCalculate Increments:\nğ‰\nâ€‹\n(\nğ­\n)\nâŠ¤\nâ€‹\nğ‰\nâ€‹\n(\nğ­\n)\nâ€‹\nÎ”\nâ€‹\nğ­\n=\nâˆ’\nğ‰\nâ€‹\n(\nğ­\n)\nâ€‹\nğ\nâ€‹\n(\nğ­\n)\n\\mathbf{J}(\\mathbf{t})^{\\top}\\mathbf{J}(\\mathbf{t})\\Delta{\\mathbf{t}}=-\\mathbf{J}(\\mathbf{t})\\mathbf{e}(\\mathbf{t})\n10:\nUpdate:\nğ­\nm\nl\n=\nğ­\nm\nl\n+\nÎ”\nâ€‹\nğ­\n\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}}=\\mathbf{t}_{\\mathrm{m}}^{\\mathrm{l}}+\\Delta\\mathbf{t}\n11:\nend\nfor\nIV\nExperiments and Analysis\nFigure 2\n:\n(a) High-fidelity simulated warehouse environment; (b)(c) The trolley and AGV platform used in real-world experiments.\nIV-A\nEvaluation Overview\nTo validate the effectiveness of the proposed calibration method, we conduct both simulation-based and real-world experiments. All experiments are executed on a computer equipped with an Intel i9-13200 @ 2GHz CPU and 32 GB RAM. The proposed method is quantitatively assessed in a high-fidelity simulation environment with available ground-truth data and further evaluated for practical applicability and robustness in real-world scenarios using an AGV platform. The following setups are used:\nâ€¢\nHigh-fidelity Simulations: The Gazebo simulator is employed to construct a realistic industrial warehouse environment measuring\n45\nâ€‹\nm\nÃ—\n35\nâ€‹\nm\n45\\text{m}\\times 35\\text{m}\n, featuring repetitive storage racks and steel-reinforced concrete pillars. A Clearpath Husky A200 AGV is used, with simulated RM3100 magnetic sensors mounted on the frame of the Husky body. Artificial distortions due to the AGV body, along with Gaussian noise, are added to the magnetic data. A simulated OS1-32 LiDAR is mounted centrally on the AGV. Ground-truth odometry information is retrived from the Gazebo simulator directly. The simulated AMF readings are then time-synchronized and projected onto the odometry trajectory.\nâ€¢\nReal-world Experiments: A plastic trolley platform is deployed to collect AMF data in a corridor environment measuring\n51\nâ€‹\nm\nÃ—\n17\nâ€‹\nm\n51\\text{m}\\times 17\\text{m}\n. Twelve pre-calibrated RM3100 magnetic sensors are mounted on the AGVâ€™s aluminum frame, forming an ideal magnetic measurement system assumed to be distortion-free. Extra ferromagetnic materials are added later for calibration. Odometry information is derived using the state-of-the-art LiDAR-inertial odometry algorithm FAST-LIO2\n[\n18\n]\n. The magnetic readings are projected onto the odometry using time synchronization.\nIV-B\nEvaluation Protocol\nIV-B1\nComparison Baseline\nThe proposed\nL2M-Calib\nmethod is compared with two state-of-the-art calibration methods to illustrate its effectiveness and advantages. Specifically: 1) OLS: Ordinary Least Squares\n[\n34\n]\n; 2) RRTLS: Ridge Regularized Total Least Squares\n[\n25\n]\n. In simulation, each methodâ€™s accuracy is quantified by comparing calibration results against known ground-truth values. In real-world experiments, where ground-truth is unavailable, performance is assessed through statistical comparison between the recovered magnetic readings and a validation magnetic map.\nIV-B2\nEvaluation Metrics\nCalibration accuracy is evaluated by: 1) Extrinsic Parameter Accuracy: The translation vector\nğ­\nm\nâ€‹\nl\n\\mathbf{t}_{\\mathrm{m}}\\mathrm{l}\nare evaluated via squared Euclidean norms:\ne\nğ­\n=\nâ€–\nğ­\n^\nâˆ’\nğ­\ngt\nâ€–\n2\n2\ne_{\\mathbf{t}}=\\|\\hat{\\mathbf{t}}-\\mathbf{t}_{\\mathrm{gt}}\\|_{2}^{2}\n; 2) Intrinsic Parameter Accuracy: The distortion matrix\nğ‚\n\\mathbf{C}\nis evaluated using the Frobenius norm:\ne\nğ‚\n=\nâˆ¥\nğ‚\n^\nâˆ’\nğ‚\nâˆ¥\ngt\nF\ne_{\\mathbf{C}}=\\|\\hat{\\mathbf{C}}-\\mathbf{C}\\mathrm{{}_{gt}}\\|\\mathrm{{}_{F}}\nand the bias vector\nğ‡\n\\mathbf{H}\nis evaluated using squared Euclidean norms:\ne\nğ‡\n=\nâ€–\nğ‡\n^\nâˆ’\nğ‡\ngt\nâ€–\n2\n2\ne_{\\mathbf{H}}=\\|\\hat{\\mathbf{H}}-\\mathbf{H}_{\\mathrm{gt}}\\|_{2}^{2}\n; 3) Real-world performance: For real-world experiments, where\nğ‚\ngt\n,\nğ‡\ngt\n,\nğ­\ngt\n\\mathbf{C}_{\\text{gt}},\\mathbf{H}_{\\text{gt}},\\mathbf{t}_{\\text{gt}}\nare unknown, the accuracy is assessed using the mean squared error between the calibrated magnetic readings\nğ\nAC\n\\mathbf{B}_{\\mathrm{AC}}\nand the readings from validation map\nğ\nMR\n\\mathbf{B}_{\\mathrm{MR}}\n:\ne\nğ\nAC\n=\nmean\nâ€‹\n(\nâ€–\nğ\nAC\nâˆ’\nğ\nMR\nâ€–\n2\n2\n)\ne_{\\mathbf{B}_{\\mathrm{AC}}}=\\mathrm{mean(\\|{\\mathbf{B}_{\\mathrm{AC}}}-\\mathbf{B}_{\\mathrm{MR}}\\|_{2}^{2})}\nIV-C\nQuantitative Analysis\nIV-C1\nFull Calibration Accuracy\nFigure 3\n:\nDifferent random paths generated for collecting magnetic sensorâ€™s readings for calibration.\nTABLE I\n:\nTransformation\ne\nğ­\n\\mathrm{e}_{\\mathbf{t}}\n, distortion\ne\nğ‚\n\\mathrm{e}_{\\mathbf{C}}\nand bias\ne\nğ‡\n\\mathrm{e}_{\\mathbf{H}}\nparameter error after two-step calibration under different paths and noise levels.\nMean (\nÎ¼\nâ€‹\nT\n\\mu T\n)\nStd\nnoise=0.1\nnoise=0.2\nnoise=0.5\nnoise=0.1\nnoise=0.2\nnoise=0.5\nğ\nğ­\n\\mathbf{e_{t}}\nPath 1\n0.0018\n0.0037\n0.0058\n0.0009\n0.0014\n0.0030\nPath 2\n0.0031\n0.0029\n0.0076\n0.0007\n0.0016\n0.0053\nPath 3\n0.0039\n0.0021\n0.0034\n0.0005\n0.0012\n0.0018\nPath 4\n0.0025\n0.0017\n0.0048\n0.0012\n0.0014\n0.0039\nPath 5\n0.0049\n0.0045\n0.0062\n0.0008\n0.0010\n0.0020\nğ\nğ‚\n\\mathbf{e_{C}}\nPath 1\n0.0018\n0.0055\n0.0289\n0.0010\n0.0089\n0.0885\nPath 2\n0.0029\n0.0080\n0.0427\n0.0069\n0.0235\n0.1331\nPath 3\n0.0016\n0.0047\n0.0276\n0.0023\n0.0136\n0.0886\nPath 4\n0.0028\n0.0070\n0.0378\n0.0066\n0.0215\n0.1154\nPath 5\n0.0028\n0.0070\n0.0368\n0.0047\n0.0205\n0.1218\nğ\nğ‡\n\\mathbf{e_{H}}\nPath 1\n0.0751\n0.1400\n0.2623\n0.0156\n0.0468\n0.5669\nPath 2\n0.0508\n0.0979\n0.5559\n0.0485\n0.1658\n0.9575\nPath 3\n0.0300\n0.0622\n0.2541\n0.0164\n0.0812\n0.5643\nPath 4\n0.0398\n0.0748\n0.4048\n0.0378\n0.1296\n0.7131\nPath 5\n0.0673\n0.0923\n0.3307\n0.0163\n0.1111\n0.7460\nIn order to show the effectiveness of the overall calibration algorithm, calibration data are collected over five different paths independently shown in Fig.\n3\nand three different noise levels. At each noise level, fifty random distortion parameters\nğ‚\n,\nğ‡\n\\mathbf{C,H}\nare generated and added to the ideal simulated magnetic sensor. Then, with each random distortion added, fifty random offsets ranging from\n0\nâˆ’\n1\nâ€‹\nm\n0-1m\nare added to the ground truth position as the initial position\nğ­\n0\n\\mathbf{t}_{0}\nfor optimization. The mean and standard deviation of the evaluation metrics mentioned in Sec.\nIV-B2\nare calculated. The final results are shown in Table\nI\n.\nIt can be seen that the overall calibration accuracy under simulation environments are very high. Even under increased noise, extrinsic errors remain below\n1\nâ€‹\ncm\n1\\text{cm}\n, and standard deviations are consistently under\n1\nâ€‹\ncm\n1\\text{cm}\n, given the initial positionâ€™s scale up to\n1\nâ€‹\nm\n1m\n. The accurate extrinsic parameter also helps ensure the successful calibration of the intrinsic parameter, where the bias errors are smaller than\n10\nâ€‹\nn\nâ€‹\nT\n10nT\n. It also can be observed that the calibration accuracy is independent on the choice of paths, indicating robustness to trajectory variation.\nIV-C2\nExtrinsic Calibration Success Rate\nFigure 4\n:\nSuccess rate of extrinsic parameter calibration under different initial estimation.\nTo further examine robustness, we evaluate success rate under larger initial offsets. For twenty randomly generated distortion parameters, 100 random initial positions within\n0\nâ€“\n3\nâ€‹\nm\n3\\text{m}\nare tested. A calibration is considered successful if the final estimate of extrinsic parameter lies within\n2\nâ€‹\ncm\n2\\text{cm}\n(small error), within\n5\nâ€‹\ncm\n5\\text{cm}\n(medium error), or otherwise marked as failure. Success rates are reported in Fig.\n4\n, illustrating that\nL2M-Calib\nmaintains a high success rate within\n1.5\nâ€‹\nm\n1.5\\text{m}\nof the true initial position, showing a good tolerance to initial guess errors.\nIV-C3\nAblation Study: Effect of Weighting on the Calibration Result\n(a)\n(b)\nFigure 5\n:\nDemonstration of the calibration results under the usage of different magnetic map interpolation methods and calibration strategies. (a) Interpolation result of magnetic map under different fingerprint density. Different colors represent different magnetic total intensity; (b) Calibration results using different mangetic map in (a) with different calibration strategies - OLS, RRTLS and\nL2M-Calib\n(ours). The results are shown in errorness compared with ground truth value.\nWe study the effect of the interpolation method and the weighting mechanism in w-RRTLS of\nL2M-Calib\n. Magnetic maps are generated using two interpolation schemes, Bi-Linear and sliding Gaussian Process Regression (s-GPR), at three fingerprint densities shown in Fig.\n5\n(a). These maps are used as references in calibration with OLS, RRTLS, and\nL2M-Calib\n. For each setting, calibration is repeated 50 times using randomly sampled intrinsic parameters and Gaussian noise with\nÏƒ\n=\n0.5\nâ€‹\nÎ¼\nâ€‹\nT\n\\sigma=0.5\\mu T\n.\nThe results Fig.\n5\n(b) show that even when the interpolation method has limited impact at high fingerprint densities, s-GPR outperforms Bi-Linear interpolation by reducing mean bias errors by over\n0.2\nâ€‹\nÎ¼\nâ€‹\nT\n0.2\\mu T\n. When the fingerprint is sparse, this improvement is much more significant. Moreover, the use of weights in\nL2M-Calib\neffectively suppresses outliers and consistently improves calibration accuracy across all fingerprint densities compared with using RRTLS directly.\nIV-D\nQualitative Analysis\nTo demonstrate practical utility, we test the method on real-world platforms. First, two distinct magnetic fingerprints are collected using the ideal (undistorted) system, and used to build a calibration map and a validation map. Then, distortion is introduced by attaching ferromagnetic materials (steel bar and block) on the plastic trolley and a more distortion-prone Bunker AGV platform. The calibration is conducted on the distorted system using the calibration map, and performance is verified on the validation map. Success is measured by the mean and standard deviation of the difference between the calibrated readings and the validation map.\n(a)\n(b)\nFigure 6\n:\nCalibration results of both trolley scenario and Bunker scenario by comparing the distorted magnetic sensorsâ€™ readings (BC), recovered magnetic sensorsâ€™ readings (AC) with the reference validation mapâ€™s reading (MR).\nThe final calibration results are shown in Fig.\n6\nfor both trolley and Bunker AGV platforms. Each column presents X, Y, and Z magnetic readings while each row is one of six sensors to calibrate. The red line (MR) indicates the reference validation map, the blue line (BC) shows the uncalibrated readings, and the green line (AC) shows the calibrated output. After calibration, the calibration output readings closely align with the reference values, regardless of platform or direction, unlike the uncalibrated readings. The mean error is below\n1\nâ€‹\nÎ¼\nâ€‹\nT\n1\\mu T\non all axes with low variance, demonstrating consistent and effective calibration across platforms.\nV\nConclusion\nIn this paper, we have presented a novel calibration method,\nL2M-Calib\n, for magnetic-LiDAR fused systems deployed on autonomous ground vehicles. The proposed approach jointly estimates the extrinsic transformation between the magnetic and LiDAR frames, as well as the intrinsic distortion parameters of the magnetic sensor just in one-key. By formulating the problem as a two-step optimization, we achieve robust and accurate calibration even under challenging conditions using AGV. Extensive simulation and real-world experiments validate the effectiveness, accuracy, and robustness of our approach across different sensor configurations and motion odometry. These results demonstrate the proposed methodâ€™s suitability for diverse deployment scenarios in magnetic-LiDAR fused autonomous navigation and perception systems.\nReferences\n[1]\nA.Â Willecke, R.Â Stahl, and L.Â C. Wolf, â€œObject fusion for collective\nperception: Will it scale?,â€ in\n2024 IEEE 27th International Conference\non Intelligent Transportation Systems (ITSC)\n, pp.Â 1614â€“1621, 2024.\n[2]\nC.Â Xiang, C.Â Feng, X.Â Xie, B.Â Shi, H.Â Lu, Y.Â Lv, M.Â Yang, and Z.Â Niu,\nâ€œMulti-sensor fusion and cooperative perception for autonomous driving: A\nreview,â€\nIEEE Intelligent Transportation Systems Magazine\n, vol.Â 15,\nno.Â 5, pp.Â 36â€“58, 2023.\n[3]\nC.Â Tian, H.Â Liu, Z.Â Liu, H.Â Li, and Y.Â Wang, â€œResearch on multi-sensor fusion\nslam algorithm based on improved gmapping,â€\nIEEE Access\n, vol.Â 11,\npp.Â 13690â€“13703, 2023.\n[4]\nN.Â T. HoaiÂ Thu and D.Â SeogÂ Han, â€œAn end-to-end motion planner using sensor\nfusion for autonomous driving,â€ in\n2023 International Conference on\nArtificial Intelligence in Information and Communication (ICAIIC)\n,\npp.Â 678â€“683, 2023.\n[5]\nV.Â Usinskis, M.Â Nowicki, A.Â Dzedzickis, and V.Â BuÄinskas, â€œSensor-fusion\nbased navigation for autonomous mobile robot,â€\nSensors\n, vol.Â 25,\np.Â 1248, 02 2025.\n[6]\nL.Â Garrote, T.Â Barros, R.Â Pereira, and U.Â J. Nunes, â€œAbsolute indoor\npositioning-aided laser-based particle filter localization with a refinement\nstage,â€ in\nProc. IECON 2019 - 45th Annu. Conf. of the IEEE Ind.\nElectron. Soc.\n, vol.Â 1, pp.Â 597â€“603, IEEE, 2019.\n[7]\nT.Â Deng\netÂ al.\n, â€œPLGSLAM: Progressive neural scene represenation with\nlocal to global bundle adjustment,â€ in\nProc. IEEE/CVF Conf. Comput.\nVis. Pattern Recognit. (CVPR)\n, pp.Â 19657â€“19666, June 2024.\n[8]\nP.Â Nazemzadeh\netÂ al.\n, â€œIndoor localization of mobile robots through QR\ncode detection and dead reckoning data fusion,â€\nIEEE/ASME Trans.\nMechatronics (TMECH)\n, vol.Â 22, no.Â 6, pp.Â 2588â€“2599, 2017.\n[9]\nJ.Â N. Greenberg and X.Â Tan, â€œDynamic optical localization of a mobile robot\nusing Kalman filtering-based position prediction,â€\nIEEE/ASME Trans.\nMechatronics (TMECH)\n, vol.Â 25, no.Â 5, pp.Â 2483â€“2492, 2020.\n[10]\nA.Â Tzitzis, A.Â Malama, V.Â Drakaki, A.Â Bletsas, T.Â V. Yioultsis, and A.Â G.\nDimitriou, â€œReal-time, robot-based, 3D localization of RFID tags, by\ntransforming phase measurements to a linear optimization problem,â€\nIEEE\nJ. Rad. Freq. Ident.\n, vol.Â 6, pp.Â 439â€“455, 2021.\n[11]\nS.Â Roos-Hoefgeest, I.Â A. Garcia, and R.Â C. Gonzalez, â€œMobile robot\nlocalization in industrial environments using a ring of cameras and aruco\nmarkers,â€ in\nProc. IECON 2021 - 47th Annu. Conf. of the IEEE Ind.\nElectron. Soc.\n, pp.Â 1â€“6, IEEE, 2021.\n[12]\nZ.Â Wu\netÂ al.\n, â€œInfrastructure-free global localization in repetitive\nenvironments: An overview,â€ in\nProc. IECON 2020 - 46th Annu. Conf. of\nthe IEEE Ind. Electron. Soc.\n, pp.Â 626â€“631, IEEE, 2020.\n[13]\nS.Â Su, H.Â Dai, S.Â Cheng, and Z.Â Chen, â€œImproved magnetic guidance approach for\nautomated guided vehicles by error analysis and prior knowledge,â€\nIEEE\nTrans. Intell. Transp. Syst. (TITS)\n, vol.Â 22, no.Â 11, pp.Â 6843â€“6852, 2020.\n[14]\nA.Â Abosekeen, A.Â Noureldin, and M.Â J. Korenberg, â€œImproving the RISS/GNSS\nland-vehicles integrated navigation system using magnetic azimuth updates,â€\nIEEE Trans. Intell. Transp. Syst. (TITS)\n, vol.Â 21, no.Â 3,\npp.Â 1250â€“1263, 2019.\n[15]\nH.Â Shen, Z.Â Wu, W.Â Wang, Q.Â Lyu, H.Â Zhou, and D.Â Wang, â€œIdf-mfl:\nInfrastructure-free and drift-free magnetic field localization for mobile\nrobot,â€ in\n2024 IEEE/RSJ International Conference on Intelligent Robots\nand Systems (IROS)\n, pp.Â 2278â€“2285, 2024.\n[16]\nZ.Â Wu, Y.Â Yue, M.Â Wen, J.Â Zhang, J.Â Yi, and D.Â Wang, â€œInfrastructure-free\nhierarchical mobile robot global localization in repetitive environments,â€\nIEEE Transactions on Instrumentation and Measurement\n, vol.Â 70,\npp.Â 1â€“12, 2021.\n[17]\nZ.Â Wu\netÂ al.\n, â€œMGLT: Magnetic-lead global localization and tracking in\ndegenerated repetitive environments,â€\nIEEE/ASME Trans. Mechatron.\n(TMECH)\n, vol.Â 29, no.Â 6, pp.Â 4687â€“4698, 2024.\n[18]\nW.Â Xu, Y.Â Cai, D.Â He, J.Â Lin, and F.Â Zhang, â€œFast-lio2: Fast direct\nlidar-inertial odometry,â€\nIEEE Transactions on Robotics\n, vol.Â 38,\nno.Â 4, pp.Â 2053â€“2073, 2022.\n[19]\nT.Â Shan and B.Â Englot, â€œLego-loam: Lightweight and ground-optimized lidar\nodometry and mapping on variable terrain,â€ in\n2018 IEEE/RSJ\nInternational Conference on Intelligent Robots and Systems (IROS)\n,\npp.Â 4758â€“4765, 2018.\n[20]\nH.Â Shen, Z.Â Wu, Y.Â Hui, W.Â Wang, Q.Â Lyu, T.Â Deng, Y.Â Zhu, B.Â Tian, and D.Â Wang,\nâ€œCte-mlo: Continuous-time and efficient multi-lidar odometry with\nlocalizability-aware point cloud sampling,â€\nIEEE Transactions on Field\nRobotics\n, vol.Â 2, pp.Â 165â€“187, 2025.\n[21]\nJ.Â BeltrÃ¡n, C.Â Guindel, A.Â deÂ la Escalera, and F.Â GarcÃ­a, â€œAutomatic\nextrinsic calibration method for lidar and camera sensor setups,â€\nIEEE\nTransactions on Intelligent Transportation Systems\n, vol.Â 23, no.Â 10,\npp.Â 17677â€“17689, 2022.\n[22]\nS.Â Yi, S.Â Worrall, and E.Â Nebot, â€œIntegrating vision, lidar and gps\nlocalization in a behavior tree framework for urban autonomous driving,â€ in\n2021 IEEE International Intelligent Transportation Systems Conference\n(ITSC)\n, pp.Â 3774â€“3780, 2021.\n[23]\nS.Â Mishra, G.Â Pandey, and S.Â Saripalli, â€œTarget-free extrinsic calibration of\na 3d-lidar and an imu,â€ in\n2021 IEEE International Conference on\nMultisensor Fusion and Integration for Intelligent Systems (MFI)\n, pp.Â 1â€“7,\n2021.\n[24]\nW.Â E. Tolles, â€œCompensation of aircraft magnetic fields,â€ Oct. 1954.\n[25]\nZ.Â Ning, P.Â Jiang, X.Â Pan, R.Â He, and W.Â Wu, â€œCompensation Technology of\nVehicle Magnetometer Based on TTLS-Tikhonov Regularization,â€\nIEEE Sensors Journal\n, vol.Â 24, pp.Â 36594â€“36603, Nov. 2024.\n[26]\nL.Â Zhou, Z.Â Li, and M.Â Kaess, â€œAutomatic extrinsic calibration of a camera and\na 3d lidar using line and plane correspondences,â€ in\n2018 IEEE/RSJ\nInternational Conference on Intelligent Robots and Systems (IROS)\n,\npp.Â 5562â€“5569, 2018.\n[27]\nJ.Â Zhang, Y.Â Liu, M.Â Wen, Y.Â Yue, H.Â Zhang, and D.Â Wang, â€œL2v2t2calib:\nAutomatic and unified extrinsic calibration toolbox for different 3d lidar,\nvisual camera and thermal camera,â€ in\n2023 IEEE Intelligent Vehicles\nSymposium (IV)\n, pp.Â 1â€“7, 2023.\n[28]\nT.Â TÃ³th, Z.Â Pusztai, and L.Â Hajder, â€œAutomatic lidar-camera calibration of\nextrinsic parameters using a spherical target,â€ in\n2020 IEEE\nInternational Conference on Robotics and Automation (ICRA)\n, pp.Â 8580â€“8586,\n2020.\n[29]\nJ.Â Zhang, Q.Â Lyu, G.Â Peng, Z.Â Wu, Q.Â Yan, and D.Â Wang, â€œLb-l2l-calib: Accurate\nand robust extrinsic calibration for multiple 3d lidars with long baseline\nand large viewpoint difference,â€ in\n2022 International Conference on\nRobotics and Automation (ICRA)\n, pp.Â 926â€“932, 2022.\n[30]\nJ.Â Lv, X.Â Zuo, K.Â Hu, J.Â Xu, G.Â Huang, and Y.Â Liu, â€œObservability-aware\nintrinsic and extrinsic calibration of lidar-imu systems,â€\nIEEE\nTransactions on Robotics\n, vol.Â 38, no.Â 6, pp.Â 3734â€“3753, 2022.\n[31]\nT.Â Kim, G.Â Pak, and E.Â Kim, â€œGril-calib: Targetless ground robot imu-lidar\nextrinsic calibration method using ground plane motion constraints,â€\nIEEE Robotics and Automation Letters\n, vol.Â 9, no.Â 6, pp.Â 5409â€“5416, 2024.\n[32]\nC.Â Chen, G.Â Xiong, Z.Â Zhang, J.Â Gong, J.Â Qi, and C.Â Wang, â€œ3d lidar-gps/imu\ncalibration based on hand-eye calibration model for unmanned vehicle,â€ in\n2020 3rd International Conference on Unmanned Systems (ICUS)\n,\npp.Â 337â€“341, 2020.\n[33]\nJ.Â F. Vasconcelos, G.Â Elkaim, C.Â Silvestre, P.Â Oliveira, and B.Â Cardeira,\nâ€œGeometric Approach to Strapdown Magnetometer Calibration in\nSensor Frame,â€\nIEEE Transactions on Aerospace and Electronic\nSystems\n, vol.Â 47, pp.Â 1293â€“1306, Apr. 2011.\n[34]\nC.Â Chi, J.-W. Lv, and D.Â Wang, â€œCalibration of triaxial magnetometer with\nellipsoid fitting method,â€\nIOP Conference Series: Earth and\nEnvironmental Science\n, vol.Â 237, p.Â 032015, Mar. 2019.\n[35]\nW.Â Chen, H.Â Zhang, S.Â Sang, M.Â Jiang, Y.Â Chen, and X.Â Liu, â€œMagnetic field\ninterference correction of high-precision geomagnetic directional\ntechnology,â€\nMeasurement\n, vol.Â 184, p.Â 109940, Nov. 2021.\n[36]\nM.Â Kok and T.Â B. SchÃ¶n, â€œMagnetometer Calibration Using Inertial\nSensors,â€ vol.Â 16, no.Â 14, pp.Â 5679â€“5689.\n[37]\nY.Â Wu, D.Â Zou, P.Â Liu, and W.Â Yu, â€œDynamic Magnetometer Calibration and\nAlignment to Inertial Sensors by Kalman Filtering,â€ vol.Â 26,\nno.Â 2, pp.Â 716â€“723.\n[38]\nK.Â Han, H.Â Han, Z.Â Wang, and F.Â Xu, â€œExtended Kalman Filter-Based\nGyroscope-Aided Magnetometer Calibration for Consumer Electronic\nDevices,â€ vol.Â 17, no.Â 1, pp.Â 63â€“71.\n[39]\nJ.Â Andel, V.Â Å imÃ¡k, A.Â KanÃ¡likova, and R.Â PirnÃ­k, â€œGNSS Based Low-Cost\nMagnetometer Calibration,â€ vol.Â 22, no.Â 21, p.Â 8447.\n[40]\nQ.Â Lyu, Z.Â Wu, H.Â Shen, W.Â Wang, J.Â Zhang, H.Â Zhou, and D.Â Wang, â€œS-gpr:\nSliding gaussian process regression-based magnetic mapping and evaluation of\ndifferent magnetic mapping methods,â€ in\nIECON 2024 - 50th Annual\nConference of the IEEE Industrial Electronics Society\n, pp.Â 1â€“7, 2024.\n[41]\nZ.Â Wu, W.Â Wang, Y.Â Yue, J.Â Zhang, H.Â Shen, and D.Â Wang, â€œMag-MM:\nMagnetic-enhanced multi-session mapping in repetitive environments,â€\nIEEE/ASME Trans. Mechatron. (TMECH)\n, 2025, accepted and to be published.\n[42]\nD.Â Wang and Z.Â Wu, â€œSensor array, systems and methods for building a magnetic\nmap, and for localizing a mobile device based on a magnetic map,â€ 2023.\nWIPO Patent, WO/2023/043373.\n[43]\nS.Â Li, D.Â Cheng, Y.Â Wang, and J.Â Zhao, â€œCompensation Method for the\nCarrier Magnetic Interference of Underwater Magnetic Vector Measurement\nSystem,â€\nIEEE Sensors Journal\n, vol.Â 23, pp.Â 10694â€“10705, May 2023.",
    "preview_text": "Multimodal sensor fusion enables robust environmental perception by leveraging complementary information from heterogeneous sensing modalities. However, accurate calibration is a critical prerequisite for effective fusion. This paper proposes a novel one-key calibration framework named L2M-Calib for a fused magnetic-LiDAR system, jointly estimating the extrinsic transformation between the two kinds of sensors and the intrinsic distortion parameters of the magnetic sensors. Magnetic sensors capture ambient magnetic field (AMF) patterns, which are invariant to geometry, texture, illumination, and weather, making them suitable for challenging environments. Nonetheless, the integration of magnetic sensing into multimodal systems remains underexplored due to the absence of effective calibration techniques. To address this, we optimize extrinsic parameters using an iterative Gauss-Newton scheme, coupled with the intrinsic calibration as a weighted ridge-regularized total least squares (w-RRTLS) problem, ensuring robustness against measurement noise and ill-conditioned data. Extensive evaluations on both simulated datasets and real-world experiments, including AGV-mounted sensor configurations, demonstrate that our method achieves high calibration accuracy and robustness under various environmental and operational conditions.\n\nL2M-Calib\n: One-key Calibration Method for LiDAR and Multiple Magnetic Sensors\nQiyang Lyu, Wei Wang, Zhenyu Wu\nâˆ—\n, Hongming Shen, Huiqin Zhou,\nand Danwei Wang\nThis research is supported by the National Research Foundation, Singapore, under the NRF Medium Sized Centre scheme (CARTIN). Any opinions, findings and conclusions or recommendations expressed in this material are those of the author(s) and do not reflect the views of National Research Foundation, Singapore.All authors are with the School of Electrical and Electronic Engineering, Nanyang Technological University, Singapore\n{zhenyu002}@e.ntu.edu.sg*Corresponding author\nAbstract\nMultimodal senso",
    "is_relevant": null,
    "relevance_score": 0.0,
    "extracted_keywords": [],
    "one_line_summary": "",
    "detailed_summary": "",
    "qa_pairs": [],
    "is_hidden": false,
    "is_starred": false,
    "published_date": "2025-12-01T11:26:00Z",
    "created_at": "2026-01-10T10:31:20.502324",
    "updated_at": "2026-01-10T10:31:20.502331",
    "flag": true
}