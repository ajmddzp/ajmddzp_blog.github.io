<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„è®ºæ–‡åº“</title>
    <style>
        /* --- é¡µé¢åŸºç¡€æ ·å¼ --- */
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f4f4f9;
            color: #333;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
        }

        /* --- å¡ç‰‡å®¹å™¨ (Gridå¸ƒå±€) --- */
        .card-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            /* è‡ªåŠ¨é€‚åº”å±å¹•å®½åº¦çš„ç½‘æ ¼ */
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* --- å•å¼ å¡ç‰‡æ ·å¼ --- */
        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            transition: transform 0.2s;
            display: flex;
            flex-direction: column;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
        }

        /* --- å¡ç‰‡å†…å®¹ç»†èŠ‚ --- */
        .card-title {
            font-size: 1.2em;
            margin: 0 0 10px 0;
            color: #2980b9;
        }

        .card-meta {
            font-size: 0.85em;
            color: #7f8c8d;
            margin-bottom: 10px;
        }

        .card-authors {
            font-weight: bold;
            color: #2c3e50;
        }

        /* å…³é”®è¯æ ‡ç­¾æ ·å¼ */
        .keywords {
            margin-bottom: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .tag {
            background: #e0f7fa;
            color: #006064;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75em;
        }

        /* æ‘˜è¦æˆªæ–­ (åªæ˜¾ç¤º3è¡Œ) */
        .card-abstract {
            font-size: 0.9em;
            color: #555;
            display: -webkit-box;
            -webkit-line-clamp: 4;
            /* æ˜¾ç¤ºè¡Œæ•° */
            -webkit-box-orient: vertical;
            overflow: hidden;
            margin-bottom: auto;
            /* æŠŠæŒ‰é’®æ¨åˆ°åº•éƒ¨ */
        }

        .card-link {
            display: block;
            margin-top: 15px;
            text-align: center;
            background-color: #3498db;
            color: white;
            text-decoration: none;
            padding: 8px;
            border-radius: 5px;
            font-weight: bold;
        }

        .card-link:hover {
            background-color: #2980b9;
        }
    </style>
</head>

<body>

    <h1>ğŸ“„ è®ºæ–‡å½’æ¡£</h1>
    <div id="app" class="card-container">
        <p>æ­£åœ¨åŠ è½½æ•°æ®...</p>
    </div>

    <script>
        async function loadPapers() {
            const container = document.getElementById('app');
            try {
                // 1. è¯»å–ç”±è„šæœ¬è‡ªåŠ¨ç”Ÿæˆçš„ç´¢å¼•æ–‡ä»¶
                const response = await fetch('papers_index.json');
                if (!response.ok) throw new Error("æ‰¾ä¸åˆ°ç´¢å¼•æ–‡ä»¶");
                const fileList = await response.json();

                container.innerHTML = ''; // æ¸…ç©º"æ­£åœ¨åŠ è½½"

                // 2. éå†åˆ—è¡¨ï¼Œè¯»å–æ¯ä¸ª JSON æ–‡ä»¶
                for (const filename of fileList) {
                    try {
                        const paperRes = await fetch(filename);
                        const paper = await paperRes.json();
                        renderCard(paper);
                    } catch (e) {
                        console.warn(`æ— æ³•è¯»å–æ–‡ä»¶: ${filename}`, e);
                    }
                }
            } catch (error) {
                container.innerHTML = `<p style="color:red; text-align:center">åŠ è½½å¤±è´¥: è¯·ç¡®ä¿è¿è¡Œäº† deploy.sh è„šæœ¬æ¥ç”Ÿæˆç´¢å¼•ã€‚</p>`;
            }
        }

        function renderCard(data) {
            const container = document.getElementById('app');

            // å¤„ç†ä½œè€…åˆ—è¡¨ (å¦‚æœæ˜¯æ•°ç»„åˆ™åˆå¹¶ï¼Œå¦‚æœæ˜¯å­—ç¬¦ä¸²ç›´æ¥ç”¨)
            const authors = Array.isArray(data.authors) ? data.authors.join(", ") : data.authors;

            // å¤„ç†å…³é”®è¯ (å¦‚æœæ²¡æœ‰åˆ™æ˜¾ç¤ºç©º)
            const keywordHtml = (data.extracted_keywords || [])
                .map(k => `<span class="tag">${k}</span>`).join('');

            const html = `
                <div class="card">
                    <h3 class="card-title">${data.title}</h3>
                    <div class="card-meta">
                        <span class="card-authors">${authors}</span>
                    </div>
                    <div class="keywords">${keywordHtml}</div>
                    <div class="card-abstract">${data.abstract}</div>
                    <a href="${data.url}" target="_blank" class="card-link">é˜…è¯»åŸæ–‡</a>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', html);
        }

        loadPapers();
    </script>
</body>

</html>