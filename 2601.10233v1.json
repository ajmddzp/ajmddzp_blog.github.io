{
    "id": "2601.10233v1",
    "title": "Proactive Local-Minima-Free Robot Navigation: Blending Motion Prediction with Safe Control",
    "authors": [
        "Yifan Xue",
        "Ze Zhang",
        "Knut Ã…kesson",
        "Nadia Figueroa"
    ],
    "abstract": "æœ¬ç ”ç©¶è‡´åŠ›äºè§£å†³åœ¨å…·æœ‰å‡¹å½¢ç§»åŠ¨éšœç¢ç‰©çš„å¤æ‚åŠ¨æ€ç¯å¢ƒä¸­ï¼Œç§»åŠ¨æœºå™¨äººå®‰å…¨é«˜æ•ˆå¯¼èˆªçš„æŒ‘æˆ˜ã€‚åŸºäºæ§åˆ¶å±éšœå‡½æ•°ï¼ˆCBFsï¼‰ç­‰ååº”å¼å®‰å…¨æ§åˆ¶å™¨ä»…æ ¹æ®éšœç¢ç‰©å½“å‰çŠ¶æ€è®¾è®¡é¿éšœç­–ç•¥ï¼Œå­˜åœ¨æœªæ¥ç¢°æ’é£é™©ã€‚ä¸ºç¼“è§£æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬é‡‡ç”¨é«˜æ–¯è¿‡ç¨‹åœ¨çº¿å­¦ä¹ å±éšœå‡½æ•°ï¼Œè¿™äº›å‡½æ•°æºè‡ªé€šè¿‡åŸºäºèƒ½é‡çš„å­¦ä¹ è®­ç»ƒçš„ç¥ç»ç½‘ç»œç”Ÿæˆçš„å¤šæ¨¡æ€éšœç¢ç‰©è¿åŠ¨é¢„æµ‹ã€‚éšåï¼Œå°†å­¦ä¹ åˆ°çš„å±éšœå‡½æ•°è¾“å…¥è‡³é‡‡ç”¨è°ƒåˆ¶æ§åˆ¶å±éšœå‡½æ•°ï¼ˆMCBFsï¼‰çš„äºŒæ¬¡è§„åˆ’ä¸­â€”â€”MCBFsæ˜¯ä¸€ç§æ— å±€éƒ¨æå°å€¼çš„CBFæ”¹è¿›ç‰ˆæœ¬ï¼Œä»¥å®ç°å®‰å…¨é«˜æ•ˆçš„å¯¼èˆªã€‚æ‰€ææ¡†æ¶å…·æœ‰ä¸¤ä¸ªæ ¸å¿ƒè´¡çŒ®ï¼šé¦–å…ˆï¼Œæ„å»ºäº†ä»é¢„æµ‹åˆ°å±éšœå‡½æ•°çš„åœ¨çº¿å­¦ä¹ æµç¨‹ï¼›å…¶æ¬¡ï¼Œå¼•å…¥äº†ä¸€ç§è‡ªä¸»å‚æ•°è°ƒä¼˜ç®—æ³•ï¼Œä½¿MCBFsèƒ½å¤Ÿè‡ªé€‚åº”åŸºäºé¢„æµ‹çš„å¯å˜å½¢å±éšœå‡½æ•°ã€‚è¯¥æ¡†æ¶åœ¨ä»¿çœŸå’Œå®é™…å®éªŒä¸­å‡å¾—åˆ°éªŒè¯ï¼Œåœ¨æ‹¥æŒ¤åŠ¨æ€ç¯å¢ƒä¸­å§‹ç»ˆä¼˜äºåŸºçº¿æ–¹æ³•ï¼Œå±•ç°å‡ºå“è¶Šçš„å®‰å…¨æ€§ä¸æ•ˆç‡ã€‚",
    "url": "https://arxiv.org/abs/2601.10233v1",
    "html_url": "https://arxiv.org/html/2601.10233v1",
    "html_content": "Proactive Local-Minima-Free Robot Navigation: Blending Motion Prediction with Safe Control\nYifan Xue\n1â€ \n, Ze Zhang\n2,â€ \n, Knut Ã…kesson\n2\nandÂ Nadia Figueroa\n1\nâ€ \nThese authors contributed equally to this work.\n1\nY. Xue and N. Figueroa are with the Department of Mechanical Engineering and Applied Mechanics, University of Pennsylvania, Philadelphia, PA 19104 USA\n{yifanxue, nadiafig}@seas.upenn.edu\n,\n2\nZ. Zhang and K. Ã…kesson are with the Department of Mechanical Engineering and Applied Mechanics, Chalmers University of Technology, SE-412 96 Gothenburg, Sweden\n{zhze, knut.akesson}@chalmers.se\nAbstract\nThis work addresses the challenge of safe and efficient mobile robot navigation in complex dynamic environments with concave moving obstacles. Reactive safe controllers like Control Barrier Functions (CBFs) design obstacle avoidance strategies based only on the current states of the obstacles, risking future collisions. To alleviate this problem, we use Gaussian processes to learn barrier functions online from multimodal motion predictions of obstacles generated by neural networks trained with energy-based learning. The learned barrier functions are then fed into quadratic programs using modulated CBFs (MCBFs), a local-minimum-free version of CBFs, to achieve safe and efficient navigation. The proposed framework makes two key contributions. First, it develops a prediction-to-barrier function online learning pipeline. Second, it introduces an autonomous parameter tuning algorithm that adapts MCBFs to deforming, prediction-based barrier functions.\nThe framework is evaluated in both simulations and real-world experiments, consistently outperforming baselines and demonstrating superior safety and efficiency in crowded dynamic environments.\nI\nIntroduction\nThe ability to handle uncertain and dynamic environments is crucial for robots to exhibit intelligence and adaptability. With the growing demand for Autonomous Mobile Robots (AMRs) in both industrial transportation and daily service tasks, navigation environments have become increasingly complex and dynamic. Robots are often required to operate alongside humans in shared spaces without physical barriers, posing significant challenges to ensuring safety and efficiency. While motion planning and obstacle avoidance in static environments are well-established, solving dynamic obstacle avoidance is still an unsolved problem\n[\n16\n]\n.\nIn particular, autonomous systems face three challenges in dynamic multi-obstacle avoidance: (i) sudden motion changes of the obstacles, (ii) future feasibility of the trajectories, and (iii) concavity of the environment. Moving obstacles can form concave unsafe regions when intersecting or overlapping with one another, which often leads to the robot freezing or stopping near the obstacle boundaries. For dynamic obstacles, their states and motions may change rapidly, undergoing continuous rotation and translation. Recent efforts to account for sudden motion changes in dynamic obstacle avoidance include increasing algorithm computation speed to make the controller reactive, and planning trajectories using receding-horizon control methods using motion predictions of the dynamic obstacles. Yet, the applicability of such techniques does not scale well to multi-obstacle scenarios like humans dynamically forming concave obstacle regions.\nFigure 1\n:\nGeneral pipeline of the proposed MMP-MCBF approach. Given a perception and tracking system, a motion predictor makes predictions of dynamic obstacles, which are converted into barrier functions via online learning using Gaussian Process Distance Fields (GPDFs). The proposed adaptive MCBF controller utilizes the barrier functions to generate safe and efficient control actions.\nIn this work, the learning-based motion predictor is pre-trained.\nReactive control is a type of control scheme that directly responds to the environment or sensory inputs without either a complicated modeling and understanding of the environment or extensive planning\n[\n6\n,\n2\n]\n. Existing state-of-the-art reactive safe controllers, including Control Barrier Function-based Quadratic Programs (CBF-QPs)\n[\n1\n,\n7\n,\n25\n]\nand dynamical system modulation\n[\n12\n,\n2\n]\n, focused on minimally altering the nominal control actions and only circumnavigate the obstacles when they are close enough to threaten robot safety. Recent advances, such as on-Manifold Modulation\n[\n8\n]\nand Modulated CBF-QPs (MCBF)\n[\n27\n]\n, show the ability to plan trajectories among concave obstacle regions without freezing the robot. Despite their real-time performance, such non-proactive strategies have no guarantees for the future feasibility of the robot.\nMultiple dynamic obstacles can easily corner a robot if it fails to react during the initial time steps, when escape from the surroundings is still feasible.\nTo enhance robot future safety using CBF-QPs, in\n[\n3\n]\n, the future distance to obstacles is leveraged when tracking its nominal trajectory. However, it requires accurate knowledge of obstacle states in the future time steps, which is nearly impossible in practice. In\n[\n13\n]\n, predictive CBF is formulated using dynamic obstaclesâ€™ future reachable spaces, approximated as ellipses. Such an approximation is over-conservative and can lead to unnecessary deadlocks when feasible paths to circumnavigate the obstacles can still be found.\nDue to these challenges, many works have focused on adopting Model Predictive Control (MPC)\nand Model Predictive Path Integral (MPPI)\nfor dynamic obstacle avoidance\n[\n30\n,\n10\n,\n21\n,\n24\n]\n. Although\nsuch receding-horizon methods\ncan naturally integrate motion prediction to ensure robot feasibility and safety in the next couple of time steps,\nthey face\nchallenges in terms of computational efficiency and handling non-convex obstacles\n[\n28\n,\n9\n]\n. Alternatively, Reinforcement Learning (RL) methods are also explored for mobile robot navigation\n[\n23\n,\n4\n]\n. They can learn complex policies from raw sensor data and store the decision-making process, which handles complex environments and guarantees real-time performance. However, they often suffer from issues such as training instability, lack of interpretability, and difficulty in generalizing to unseen environments. Moreover, ensuring safety during training and deployment remains a critical challenge, especially in dynamic environments\n[\n26\n]\n.\nIn this work, we propose a novel framework that integrates Multimodal Motion Prediction (MMP) with the safe controller MCBF-QP to enable safe and efficient mobile robot navigation in dynamic environments with non-convex obstacles. Both model-based Constant Velocity Models (CVMs)\n[\n22\n]\nand learning-based Energy-Based Models (EBMs)\n[\n31\n]\nare used as motion predictors. The frameworkâ€™s two main technical contributions, detailed in Section\nIV\n, are: the online learning of barrier functions from motion predictions, and the adaptive on-manifold safe control algorithm. We validate the proposed method in both simulation and real-world experiments, demonstrating superior performance in dynamic environments.\nII\nProblem Formulation\nGiven control-affine nonlinear dynamics,\nf\n:\nâ„\nn\nâ†’\nâ„\nn\nf:\\mathbb{R}^{n}\\to\\mathbb{R}^{n}\nand\ng\n:\nâ„\nn\nâ†’\nâ„\nn\nÃ—\nm\ng:\\mathbb{R}^{n}\\to\\mathbb{R}^{n\\times m}\n, with the state\nğ’™\nâˆˆ\nâ„\nn\n\\bm{x}\\!\\in\\!\\mathbb{R}^{n}\nand the control input\nğ’–\nâˆˆ\nâ„\nm\n\\bm{u}\\!\\in\\!\\mathbb{R}^{m}\n, for a continuous-time system\nğ’™\nË™\n=\nf\nâ€‹\n(\nğ’™\n)\n+\ng\nâ€‹\n(\nğ’™\n)\nâ€‹\nğ’–\n\\dot{\\bm{x}}=f(\\bm{x})+g(\\bm{x})\\bm{u}\n, the following concepts for safe control can be defined.\nSafe Control:\nIn an environment with a set\nO\nO\nof occupied unsafe regions, for an unsafe region\nğ’™\no\nâˆˆ\nâ„\nd\n\\bm{x}_{o}\\in\\mathbb{R}^{d}\nwhere\no\nâˆˆ\nO\no\\in O\n, a continuously differentiable function\nh\no\n:\nâ„\nn\nÃ—\nâ„\nd\nâ†’\nâ„\nh_{o}\\!:\\mathbb{R}^{n}\\!\\times\\!\\mathbb{R}^{d}\\rightarrow\\mathbb{R}\nis a barrier function if the safe set\nC\no\nC_{o}\n(outside the obstacle), boundary set\nâˆ‚\nC\no\n\\partial C_{o}\n(on the obstacleâ€™s boundary), and unsafe set\nÂ¬\nC\no\n\\neg C_{o}\n(inside the obstacles) are defined\n[\n1\n]\n:\nC\no\n\\displaystyle C_{o}\n=\n{\nğ’™\nâˆˆ\nâ„\nn\n,\nğ’™\no\nâˆˆ\nâ„\nd\n:\nh\no\nâ€‹\n(\nğ’™\n,\nğ’™\no\n)\n>\n0\n}\n,\n\\displaystyle=\\{\\bm{x}\\in\\mathbb{R}^{n},\\bm{x}_{o}\\in\\mathbb{R}^{d}:h_{o}(\\bm{x},\\bm{x}_{o})>0\\},\n(1)\nâˆ‚\nC\no\n\\displaystyle\\partial C_{o}\n=\n{\nğ’™\nâˆˆ\nâ„\nn\n,\nğ’™\no\nâˆˆ\nâ„\nd\n:\nh\no\nâ€‹\n(\nğ’™\n,\nğ’™\no\n)\n=\n0\n}\n,\n\\displaystyle=\\{\\bm{x}\\in\\mathbb{R}^{n},\\bm{x}_{o}\\in\\mathbb{R}^{d}:h_{o}(\\bm{x},\\bm{x}_{o})=0\\},\n(2)\nÂ¬\nC\no\n\\displaystyle\\neg C_{o}\n=\n{\nğ’™\nâˆˆ\nâ„\nn\n,\nğ’™\no\nâˆˆ\nâ„\nd\n:\nh\no\nâ€‹\n(\nğ’™\n,\nğ’™\no\n)\n<\n0\n}\n.\n\\displaystyle=\\{\\bm{x}\\in\\mathbb{R}^{n},\\bm{x}_{o}\\in\\mathbb{R}^{d}:h_{o}(\\bm{x},\\bm{x}_{o})<0\\}.\n(3)\nThe barrier function\nh\no\nâ€‹\n(\nğ’™\n,\nğ’™\no\n)\nh_{o}(\\bm{x},\\bm{x}_{o})\ncan be a safety measurement acquired by elevating the Distance Function (DF) to the robot state space, where the DF\ns\no\nâ€‹\n(\nğƒ\n,\nğ’™\no\n)\ns_{o}(\\bm{\\xi},\\bm{x}_{o})\nis defined as the orthogonal distance\nfrom\na robot position\nğƒ\n\\bm{\\xi}\nto the boundary of the unsafe set\no\no\n[\n17\n]\n.\nWhile\nh\no\nâ€‹\n(\nğ’™\n,\nğ’™\no\n)\nh_{o}(\\bm{x},\\bm{x}_{o})\ncommonly incorporates the DFs between the robot and the\nphysical\nobstacle boundaries\n[\n27\n]\n, the barrier functions in this work also measure the distance from the robot to the\nvirtual\nregion of predicted human reachable spaces. This allows the proposed framework to strategically circumvent corridors that are soon to be blocked by human activities, leading to safer and more efficient trajectory generation.\nEstimated Forward Reachable Set:\nGiven the initial state\nğ’™\no\nâ€‹\n(\n0\n)\nâˆˆ\nâ„\nd\n\\bm{x}_{o}(0)\\in\\mathbb{R}^{d}\n, estimated possible motion set\nU\no\nU_{o}\n, and dynamics\nf\no\nâ€‹\n(\nğ’™\no\n,\nğ’–\no\n)\nf_{o}(\\bm{x}_{o},\\bm{u}_{o})\nof a moving obstacle, its Estimated Forward Reachable Set (EFRS) at time\nÏ„\n>\n0\n\\tau>0\nis all possible regions where the dynamic obstacle can reach given\nÏ„\n\\tau\nseconds, i.e.,\nâ„›\n^\n(\nÏ„\n)\n=\n{\nğ’™\no\n(\nÏ„\n)\n|\n\\displaystyle\\hat{\\mathcal{R}}(\\tau)=\\{\\bm{x}_{o}(\\tau)|\nâˆƒ\nğ’–\no\nâ€‹\n(\nt\n)\nâˆˆ\nU\no\n,\n\\displaystyle\\exists\\bm{u}_{o}(t)\\!\\in\\!U_{o},\nğ’™\nË™\no\n(\nt\n)\n=\nf\no\n(\nğ’™\no\n(\nt\n)\n,\nğ’–\no\n(\nt\n)\n)\n,\nt\nâˆˆ\n[\n0\n,\nÏ„\n]\n}\n.\n\\displaystyle\\dot{\\bm{x}}_{o}(t)=f_{o}(\\bm{x}_{o}(t),\\bm{u}_{o}(t))\\,,t\\!\\in\\![0,\\tau]\\}.\n(4)\nGiven the inherent uncertainty in human motion, an EFRS should include possible multimodality and local randomness.\nAssumptions:\nIn this work,\nassumptions are made for two aspects: perception and prediction. For perception, the static layout of the environment is known and mostly stays unchanged.\nPoint cloud representations of all obstacle surfaces\nwithin a distance\nb\nb\n, without considering sensor visibility limitations, are accessible. In open areas, such information can be obtained from onboard multi-sensor systems, such as LiDARs and cameras. In occluded scenarios, an omniscient perception system\n[\n30\n]\ncan be employed.\nFor motion prediction, to ensure general accuracy, all dynamic obstacles move rationally and purposefully.\nIn this work, we employ reactive motion predictors that do not explicitly model interactions between robots and humans.\nAlthough interaction-coupled predictors can capture richer dynamics in dense environments, they can be seamlessly integrated into our framework; we leave this extension to future work.\nWe also assume that sufficient data are available for learning-based motion predictors to capture most motion patterns.\nIII\nPreliminaries\nThis work addresses two sub-problems: modeling groups of obstacles using Gaussian processes informed by motion prediction and controlling AMRs for reactive obstacle avoidance.\nIII-A\nPredictive Unsafe Region\nLet the current time be 0. Given a dynamic obstacle\no\no\nand a motion predictor\nG\nMP\nG_{\\text{MP}}\n, its estimated future motions are,\nğœ¿\nâ€‹\n(\nÏ„\n)\n=\nG\nMP\nâ€‹\n(\nğœ¿\ne\nâ€‹\n(\n0\n)\n,\nÏ„\n)\n,\n\\bm{\\kappa}({\\tau})=G_{\\text{MP}}(\\bm{\\kappa}_{e}({0}),\\tau),\n(5)\nwhere\nğœ¿\ne\nâ€‹\n(\n0\n)\n\\bm{\\kappa}_{e}({0})\nis the extensive motion information available at the current instant,\nÏ„\nâˆˆ\n(\n0\n,\nÏ„\nmax\n]\n\\tau\\in(0,\\tau_{\\max}]\nis the predictive time offset, and\nğœ¿\nâ€‹\n(\nÏ„\n)\n\\bm{\\kappa}({\\tau})\nis its future motion at time\nÏ„\n\\tau\n.\nThe actual\nğœ¿\ne\nâ€‹\n(\n0\n)\n\\bm{\\kappa}_{e}({0})\ndepends on the chosen predictor\n. The predicted motion is then converted to a unified potentially occupied area, which can be regarded as the EFRS of the obstacle. The motion predictor\nG\nMP\nG_{\\text{MP}}\nis not necessarily the same as the obstacleâ€™s dynamics\nf\no\nf_{o}\n, but they can serve the same purpose of generating the EFRS.\nA common way to make predictions is based on the historical motion profile of the obstacle. For instance, the CVM assumes that a moving object keeps its motion tendency with a constant velocity.\nAn EFRS can be generated by inflating the predicted trajectory of the CVM, as shown in Fig.\n3\n.\nWhile CVMs are simple but effective in many scenarios\n[\n22\n]\n, to adapt to more complex environments, a data-driven EBM\n[\n15\n,\n31\n]\nis also used in this work, which can generate multimodal motion prediction over multiple time steps in one shot,\nâŸ¨\nğœ¿\nâ€‹\n(\nÏ„\n)\n|\nÏ„\n=\n1\n,\n2\n,\nâ€¦\n,\nÏ„\nmax\nâŸ©\n=\nG\nEBM\nâ€‹\n(\nğœ¿\ne\nâ€‹\n(\n0\n)\n)\n.\n\\langle\\bm{\\kappa}({\\tau})|\\tau=1,2,\\ldots,\\tau_{\\max}\\rangle=G_{\\text{EBM}}\\left(\\bm{\\kappa}_{e}({0})\\right).\n(6)\nFor the EBM motion predictor,\nğœ¿\ne\nâ€‹\n(\n0\n)\n\\bm{\\kappa}_{e}({0})\nis the current and multiple previous positions of the obstacle plus the birdâ€™s-eye-view environmental map, and\nğœ¿\nâ€‹\n(\nÏ„\n)\n\\bm{\\kappa}({\\tau})\nis a probability map of the obstacleâ€™s future position at step\nÏ„\n\\tau\n.\nIn the case of CVMs,\nğœ¿\ne\nâ€‹\n(\n0\n)\n\\bm{\\kappa}_{e}({0})\nincludes only the current and past positions of the object.\nIII-B\nGaussian Process Distance Field\nGiven a set of boundary points\nğ’«\n=\n{\nğ’‘\ni\n}\n1\nM\n\\mathcal{P}=\\{\\bm{p}_{i}\\}^{M}_{1}\nof obstacles, a Gaussian Process Distance Field (GPDF)\n[\n5\n,\n14\n]\ncan be established to estimate a continuous and differentiable distance function to obstacles regarding any point in the workspace.\nDefine a latent field\no\nâ€‹\n(\nğ’‘\n)\nâˆ¼\nğ’¢\nâ€‹\n(\n0\n,\nk\no\nâ€‹\n(\nğ’‘\n,\nğ’«\n)\n)\no(\\bm{p})\\sim\\mathcal{G}(0,k_{o}(\\bm{p},\\mathcal{P}))\nfollowing a Gaussian process with the covariance kernel\nk\no\nk_{o}\n, and the inverse function\nf\ninv\nf_{\\text{inv}}\nmapping to the distance field\nf\ndist\nâ€‹\n(\nğ’‘\n)\nf_{\\text{dist}}(\\bm{p})\n,\nf\ninv\nâ€‹\n(\nk\no\nâ€‹\n(\nğ’‘\n,\nğ’«\n)\n)\n\\displaystyle f_{\\text{inv}}\\left(k_{o}(\\bm{p},\\mathcal{P})\\right)\nâ‰”\nâ€–\nğ’‘\nâˆ’\nğ’«\nâ€–\n,\n\\displaystyle\\coloneq||\\bm{p}-\\mathcal{P}||,\n(7)\nf\ndist\nâ€‹\n(\nğ’‘\n)\n\\displaystyle f_{\\text{dist}}(\\bm{p})\n=\nf\ninv\nâ€‹\n(\no\nâ€‹\n(\nğ’‘\n)\n)\n.\n\\displaystyle=f_{\\text{inv}}(o(\\bm{p})).\n(8)\nLet\nK\no\nğ’«\nK_{o}^{\\mathcal{P}}\nbe the covariance kernel of given obstacle points, and\nk\no\nğ’‘\n=\nk\no\nâ€‹\n(\nğ’‘\n,\nğ’‘\n)\nk_{o}^{\\bm{p}}\\!=\\!k_{o}(\\bm{p},\\bm{p})\n, according to Gaussian process regression,\no\nÂ¯\nâ€‹\n(\nğ’‘\n)\n\\displaystyle\\bar{o}(\\bm{p})\n=\nk\no\nâ€‹\n(\nğ’‘\n,\nğ’«\n)\nâ€‹\n(\nK\no\nğ’«\n+\nÏƒ\no\n2\nâ€‹\nğˆ\n)\nâˆ’\n1\nâ‹…\nğŸ\nâŸ\nÎ±\nâ€‹\n(\nğ’«\n,\nÏƒ\no\n)\n,\n\\displaystyle=k_{o}(\\bm{p},\\mathcal{P})\\underbrace{\\left(K_{o}^{\\mathcal{P}}+\\sigma_{o}^{2}\\mathbf{I}\\right)^{-1}\\cdot\\bm{1}}_{\\alpha(\\mathcal{P},\\sigma_{o})},\n(9)\nğœğ¨ğ¯\nâ€‹\n(\no\nâ€‹\n(\nğ’‘\n)\n)\n\\displaystyle\\mathbf{cov}(o(\\bm{p}))\n=\nk\no\nğ’‘\nâˆ’\nk\no\nâ€‹\n(\nğ’‘\n,\nğ’«\n)\nâ€‹\n(\nK\no\nğ’«\n+\nÏƒ\no\n2\nâ€‹\nğˆ\n)\nâˆ’\n1\nâ€‹\nk\no\nâ€‹\n(\nğ’«\n,\nğ’‘\n)\n,\n\\displaystyle=k_{o}^{\\bm{p}}-k_{o}(\\bm{p},\\mathcal{P})\\left(K_{o}^{\\mathcal{P}}+\\sigma_{o}^{2}\\mathbf{I}\\right)^{-1}k_{o}(\\mathcal{P},\\bm{p}),\n(10)\nwhere\nÏƒ\no\n\\sigma_{o}\nis the noise covariance,\nğŸ\n\\bm{1}\nis a vector of ones (let\nk\no\nâ€‹\n(\nğ’«\n,\nğ’«\n)\n=\nğŸ\nk_{o}(\\mathcal{P},\\mathcal{P})\\!=\\!\\bm{1}\n), and\nÎ±\nâ€‹\n(\nâ‹…\n)\n\\alpha(\\cdot)\nis the learned model. The gradient is,\nf\ngrad\nâ€‹\n(\nğ’‘\n)\n=\nâˆ‡\nğ’‘\nf\ndist\nâ€‹\n(\nğ’‘\n)\n=\nâˆ‚\nf\ninv\nâˆ‚\no\nâ€‹\n[\nâˆ‡\nğ’‘\nk\no\nâ€‹\n(\nğ’‘\n,\nğ’«\n)\nâ€‹\nÎ±\nâ€‹\n(\nğ’«\n,\nÏƒ\no\n)\n]\n.\nf_{\\text{grad}}(\\bm{p})=\\nabla_{\\bm{p}}f_{\\text{dist}}(\\bm{p})=\\frac{\\partial f_{\\text{inv}}}{\\partial o}\\left[\\nabla_{\\bm{p}}k_{o}(\\bm{p},\\mathcal{P})\\alpha(\\mathcal{P},\\sigma_{o})\\right].\n(11)\nBased on boundary points of obstacles, GPDFs provide both distance fields and gradient fields in a unified form.\nFigure 2\n:\nModulated CBF (left) vs. CBF (right). When facing a complex concave obstacle (in purple), modulated CBFs generate an additional exit â€œforceâ€ (long red arrows) introduced by Eq.Â (\n13\n), guiding the robot along the isoline (dashed lines) direction\nÏ•\nâ€‹\n(\nğ’™\n,\nh\no\n)\n\\phi(\\bm{x},h_{o})\nand away from the obstacle, whereas standard CBFs become trapped in local minima.\nIII-C\nModulated Control Barrier Functions\nMany safe reactive controllers, including the standard CBF-QPs, suffer from local minima or saddle points\n[\n8\n,\n11\n,\n18\n]\n.\nTo generate safe inputs that ensure no local minima, we use the modulation based on-Manifold Modulated CBF-QP (MCBF-QP)\n[\n27\n]\n. Control inputs synthesized by CBF-QPs inevitably result in\nundesired stable equilibria\neven for fully-actuated robots\n[\n18\n,\n27\n]\n, which occur when\nğ’™\nË™\n=\n0\n\\dot{\\bm{x}}=0\n. A robot trapped at a\nundesired equilibrium\nwill reduce the efficiency of a planned robot trajectory and even prevent it from reaching the goal.\nFigure 3\n:\nPerformance of tangent vector selection using geodesic approximation with constant\nÎ²\n\\beta\n(first row until the dashed divider,\nÎ²\n=\n0.02\n\\beta=0.02\nin 2D,\nÎ²\n=\n0.05\n\\beta=0.05\nin 3D) versus generalized geodesic approximation with adaptive\nÎ²\n\\beta\nselection (second row until the dashed divider). Pink polygons are the estimated forward reachable space of the three humans from the motion predictor under fixed 0.05s time steps and 60 iterations. The last column is the visualization of the\naugmented\nCBFs used in the 3D cases.\nTo eliminate\nundesired equilibria\nof CBF-QPâ€“type solvers, MCBF-QP modulates the dynamics and projects components onto the tangent planes of barrier functions, introducing tangential velocities. This is achieved by introducing an additional constraint on the standard CBF-QP formulations as inÂ (\n13\n).\nğ’–\nmcbf\n\\displaystyle\\bm{u}_{\\text{mcbf}}\n=\narg\nmin\nğ’–\nâˆˆ\nâ„\nm\n(\nğ’–\nâˆ’\nğ’–\nnom\n)\nâŠ¤\n(\nğ’–\nâˆ’\nğ’–\nnom\n)\n,\n\\displaystyle=\\arg\\min_{\\bm{u}\\in\\mathbb{R}^{m}}\\;(\\bm{u}-\\bm{u}_{\\text{nom}})^{\\top}(\\bm{u}-\\bm{u}_{\\text{nom}}),\ns.t.\nâ„’\nf\nâ€‹\nh\no\n+\nâ„’\ng\nâ€‹\nh\no\nâ€‹\nğ’–\n+\nâˆ‡\nğ’™\no\nh\no\nâŠ¤\nâ€‹\nğ’™\nË™\no\nâ‰¥\nâˆ’\nÎ±\nâ€‹\n(\nh\no\n)\n,\n\\displaystyle\\mathcal{L}_{f}h_{o}+\\mathcal{L}_{g}h_{o}\\bm{u}+\\nabla_{\\bm{x}_{o}}h_{o}^{\\top}\\dot{\\bm{x}}_{o}\\geq-\\alpha\\left(h_{o}\\right),\n(12)\nÏ•\nâ€‹\n(\nğ’™\n,\nh\no\n)\nâŠ¤\nâ€‹\nf\nâ€‹\n(\nğ’™\n)\n+\nÏ•\nâ€‹\n(\nğ’™\n,\nh\no\n)\nâŠ¤\nâ€‹\ng\nâ€‹\n(\nğ’™\n)\nâ€‹\nğ’–\nâ‰¥\nÎ³\n,\n\\displaystyle\\phi(\\bm{x},h_{o})^{\\top}f(\\bm{x})+\\phi(\\bm{x},h_{o})^{\\top}g(\\bm{x})\\bm{u}\\geq\\gamma,\n(13)\nwhere\nh\no\n=\nh\no\nâ€‹\n(\nğ’™\n,\nğ’™\no\n)\nh_{o}=h_{o}(\\bm{x},\\bm{x}_{o})\nis the control barrier function in the context of CBF.\nâ„’\nf\n\\mathcal{L}_{f}\nand\nâ„’\ng\n\\mathcal{L}_{g}\nare the Lie derivatives of\nh\no\nh_{o}\n, so\nâ„’\nf\nâ€‹\nh\no\n=\nâˆ‡\nğ’™\nh\no\nâ€‹\nf\nâ€‹\n(\nğ’™\n)\n\\mathcal{L}_{f}h_{o}=\\nabla_{\\bm{x}}h_{o}f(\\bm{x})\nand\nâ„’\ng\nâ€‹\nh\no\n=\nâˆ‡\nğ’™\nh\no\nâ€‹\ng\nâ€‹\n(\nğ’™\n)\n\\mathcal{L}_{g}h_{o}=\\nabla_{\\bm{x}}h_{o}g(\\bm{x})\n, where\nâˆ‡\nğ’™\nh\nâˆˆ\nâ„\nn\nÃ—\n1\n\\nabla_{\\bm{x}}h\\in\\mathbb{R}^{n\\times 1}\ncan be viewed as the normal direction from the robot state\nğ’™\n\\bm{x}\nto the unsafe set surface. Here,\nÎ³\n>\n0\n\\gamma>0\nis a tuning parameter, and the tangent direction\nÏ•\nâ€‹\n(\nğ’™\n,\nh\no\n)\n\\phi(\\bm{x},h_{o})\ncan be derived using various obstacle exit strategies, such as hessian or geometric approximation\n[\n27\n,\n8\n]\n.\nMCBF-QP ensures the same safety guarantee as the standard CBF-QP through the use of the CBF constraint in Eq. (\n12\n). Given a consistent normalized tangent velocity guidance vector\nÏ•\nâ€‹\n(\nğ’™\n,\nh\no\n)\n\\phi(\\bm{x},h_{o})\nparallel to\nh\no\nh_{o}\nâ€™s isolines, and a proper\nÎ³\n\\gamma\n, Eq. (\n13\n) ensures circumvention of the obstacle\nh\no\nh_{o}\n,\ni.e., local-minimum-free\n. This is because\nÏ•\nâŠ¤\nâ€‹\nğ’™\nË™\nâ‰¥\nÎ³\n\\phi^{\\top}\\dot{\\bm{x}}\\geq\\gamma\nwill keep moving the robot in one direction along the isolines until reaching the side that is closer to the target, as demonstrated in Fig.\n2\n.\nIV\nMMP-MCBF Framework\nTo leverage the strengths of motion predictors and the ability of safe reactive controllers to navigate concave environments, we propose a proactive and adaptive MMP-MCBF framework, which constructs virtual DFs based on the EFRSs of moving obstacles and continuously updates these functions through online learning, as depicted in Fig.\n1\n.\nIV-A\nBarrier Function Online Learning with Motion Prediction\nDifferent motion prediction methods output predictions\nğœ¿\n\\bm{\\kappa}\nin different formats. To make them compatible with CBF-QPs, we transform motion prediction into unified EFRSs\nâ„›\n^\n\\hat{\\mathcal{R}}\nof obstacles. In our online learning pipeline, the obtained EFRSs at each iteration are fed into GPDFs to learn DFs, which are then converted into control barrier functions.\nTo obtain a GPDF, boundary points\nğ’«\n\\mathcal{P}\nwith proper density are required.\nFor CVM-based motion predictors, the basic idea is to define an information process space\n[\n19\n]\nas the EFRS and sample boundary points from it.\nBased on the estimated velocity of a moving obstacle, a predicted trajectory can be generated. By symmetrically inflating this trajectory about its centerline, a rhombus-shaped region is constructed, which serves as the information-processing space, such as in Fig.\n3\n. In this work, CVM-based motion predictors are used in the simulated social navigation task and real-world experiments.\nFor EBMs, more complicated postprocessing is needed since they generate complex multimodal motion prediction in the form of discrete probability maps. The pixel values of these maps represent the probability of occupancy. According to Eq. (\n6\n), a stack of probability maps for all predictive time steps is produced for each query. A uniform occupancy map\nğœ¿\nocc\n\\bm{\\kappa}_{\\text{occ}}\nover all time steps is obtained by summing all probability maps, i.e.,\nğœ¿\nocc\n=\nâˆ‘\nÏ„\n=\n1\nÏ„\nmax\nğœ¿\nâ€‹\n(\nÏ„\n)\n\\bm{\\kappa}_{\\text{occ}}\\!=\\!\\sum_{\\tau=1}^{\\tau_{\\max}}\\bm{\\kappa}({\\tau})\n.\nBy setting a threshold\nÎ´\nÎº\n\\delta_{\\kappa}\n, the probabilistic occupancy map is converted into a binary occupancy map. A boundary polygon without self-intersection can be obtained through edge detection and contour detection, i.e.,\nCONTOUR\nâ€‹\n(\nEDGE\nâ€‹\n(\nğœ¿\nocc\n,\nÎ´\nÎº\n)\n)\n\\text{CONTOUR}(\\text{EDGE}(\\bm{\\kappa}_{\\text{occ}},\\delta_{\\kappa}))\n, which encloses the estimated reachable set.\nSpecifically, the function\nEDGE\nâ€‹\n(\nğœ¿\nocc\n,\nÎ´\nÎº\n)\n\\text{EDGE}(\\bm{\\kappa}_{\\text{occ}},\\delta_{\\kappa})\nconverts\nğœ¿\nocc\n\\bm{\\kappa}_{\\text{occ}}\ninto a binary edge map according to\nÎ´\nÎº\n\\delta_{\\kappa}\n.\nBy interpolating this contour and feeding the result into an online learning GPDF, we obtain the DF\ns\no\nâ€‹\n(\nâ‹…\n)\ns_{o}(\\cdot)\nfor the learned EFRS, from which the control barrier function\nh\no\nâ€‹\n(\nğ’™\n,\nğ’™\no\n)\nh_{o}(\\bm{x},\\bm{x}_{o})\ncan be computed.\nIV-B\nAdaptive Modulated Control\nStandard MCBF-QP\n[\n27\n]\nis designed to circumvent obstacles, given the constraint in Eq.Â (\n13\n). In general, the shortest path circumventing a single obstacle may not be the best one in dense multi-moving-obstacle environments. Also, MCBF-QP is designed for non-deforming obstacle avoidance applications and cannot adapt to constantly changing EFRSs. To resolve the greedy path-planning limitation and ensure stable performance in the presence of deforming unsafe sets, we propose two improvements that render MCBF-QP proactive and adaptive.\nGeneralized Geodesic Approximation\nDuring the navigation, the virtual obstacles defined as the EFRS for pedestrians can overlap with other physical obstacles in the environment, thereby blocking certain passways to the target. When such scenarios occur, computing the exit strategy\nÏ•\nâ€‹\n(\nğ’™\n,\nh\no\n)\n\\phi(\\bm{x},h_{o})\nwith respect to either the predicted reachable space or nearby physical obstacles may lead the robot to freeze at the intersecting region. Therefore, whenever a predicted reachable space of a dynamic obstacle is close enough to the robot, we instead generate\nÏ•\nâ€‹\n(\nğ’™\n,\nh\nÂ¯\n)\n\\phi(\\bm{x},\\bar{h})\nusing the combined\nbarrier function\nfrom all obstacles within distance\nb\nb\nto the robot. Given a set of obstacles\nQ\n=\n{\no\n|\nh\no\nâ€‹\n(\nğ’™\n,\nğ’™\no\n)\nâ‰¤\nb\n,\no\nâˆˆ\nO\n}\nQ=\\{o|h_{o}(\\bm{x},\\bm{x}_{o})\\leq b,o\\in O\\}\n, the combined single obstacle representation can be computed\n[\n8\n]\nas\nh\nÂ¯\nâ€‹\n(\nğ’™\n)\n=\nâˆ’\n1\nÏ\nâ€‹\nlog\nâ¡\n(\nâˆ‘\no\nâˆˆ\nQ\nexp\nâ¡\n(\nâˆ’\nÏ\nâ€‹\n[\nh\no\nâ€‹\n(\nğ’™\n,\nğ’™\no\n)\n+\n1\n]\n)\n)\nâˆ’\n1\n,\n\\bar{h}(\\bm{x})=-\\frac{1}{\\rho}\\log\\left(\\sum_{o\\in Q}\\exp{(-\\rho[h_{o}(\\bm{x},\\bm{x}_{o})+1])}\\right)-1,\n(14)\nwhere\nÏ\n\\rho\nis a positive user-selected constant. The smaller the value of\nÏ\n\\rho\n, the smoother the edges in the distance field.\nThe resulting function\nh\nÂ¯\n\\bar{h}\ncan represent multiple discrete obstacles using a single function.\nGiven the combined barrier function\nh\nÂ¯\n\\bar{h}\n, the obstacleâ€™s exit direction\nÏ•\nâ€‹\n(\nğ’™\n,\nh\nÂ¯\n)\n\\phi(\\bm{x},\\bar{h})\ncan be obtained. Let\nğ’†\n(\n0\n)\n\\bm{e}^{(0)}\nbe one out of\nm\nm\nuniformly sampled candidate directions in\nâ„\nn\n\\mathbb{R}^{n}\n, satisfying the requirement in (\n15\n) and subject to\nğ’†\n(\n0\n)\nâˆ‰\nğ’©\nâ€‹\n(\nH\nâ€‹\n(\nğ’™\n,\nh\nÂ¯\n)\n)\n\\bm{e}^{(0)}\\notin\\mathcal{N}(H(\\bm{x},\\bar{h}))\n, where\nğ’©\nâ€‹\n(\nH\n)\n\\mathcal{N}(H)\nrepresent the nullspace of tangent hyperplane\nH\nH\n.\nH\nâ€‹\n(\nğ’™\n,\nh\nÂ¯\n)\nH(\\bm{x},\\bar{h})\nis the hyperplane intersecting\nğ’™\n\\bm{x}\nand tangent to the obstacle surface described by\nh\nÂ¯\n\\bar{h}\n. Denote\nğ’™\ni\n\\bm{x}_{i}\nas the\ni\nth\ni^{\\text{th}}\nelement in robot state\nğ’™\n\\bm{x}\n,\ni\nâˆˆ\n{\n1\n,\n2\n,\n.\n.\n,\nd\n}\ni\\in\\{1,2,..,d\\}\n,\nğ’†\n(\n0\n)\n=\n[\ne\n1\n(\n0\n)\n,\nâ€¦\n,\ne\nd\n(\n0\n)\n]\nâŠ¤\n,\nand\nâ€‹\ne\ni\n(\n0\n)\n=\n0\n,\nif\nâ€‹\nâˆ‚\nh\nÂ¯\n/\nâˆ‚\nğ’™\ni\n=\n0\n.\n\\bm{e}^{(0)}\\!=\\![e^{(0)}_{1},\\ldots,e^{(0)}_{d}]^{\\top},\\,\\text{and}\\,e^{(0)}_{i}=0,\\,\\text{if}\\,\\,\\partial\\bar{h}/\\partial\\bm{x}_{i}=0.\n(15)\nA geodesic approximation method can then utilize a first-order approximation of the obstacle surface to generate paths\nX\n=\n{\nğ’™\n(\n0\n)\n,\nğ’™\n(\n1\n)\n,\nâ€¦\n,\nğ’™\n(\nN\n)\n}\nX=\\{\\bm{x}^{(0)},\\bm{x}^{(1)},\\dots,\\bm{x}^{(N)}\\}\n, which\nstart along each of the\nm\nm\nsampled directions and exit the obstacle on its isosurface\n, where\nN\nâˆˆ\nâ„•\nN\\in\\mathbb{N}\nis the iteration number\n[\n8\n]\n. The function\nÏ•\nâ€‹\n(\nğ’™\n,\nh\nÂ¯\n)\nâˆˆ\nâ„\nn\n\\phi(\\bm{x},\\bar{h})\\in\\mathbb{R}^{n}\nthen selects, among the\nm\nm\nuniformly sampled candidate directions, the one with the smallest associated potential\nP\n(\nN\n)\nP^{(N)}\ncomputed using Eq.Â (\n16\n)\n, where\nÎ²\n\\beta\nis the step size and\np\nâ€‹\n(\nğ’™\n)\np(\\bm{x})\nis a user-defined reward function. In most applications,\np\nâ€‹\n(\nğ’™\n)\np(\\bm{x})\nis taken as a weighted combination of the distance from\nğ’™\n(\ni\n)\n\\bm{x}^{(i)}\nto the target and the value of\nh\nÂ¯\nâ€‹\n(\nğ’™\n(\ni\n)\n)\n\\bar{h}(\\bm{x}^{(i)})\n.\nğ’™\n(\ni\n+\n1\n)\n\\displaystyle\\bm{x}^{(i+1)}\n=\nÎ²\nâ€‹\nH\nâ€‹\n(\nğ’™\n(\ni\n)\n,\nh\nÂ¯\n)\nâ€‹\nH\nâ€‹\n(\nğ’™\n(\ni\n)\n,\nh\nÂ¯\n)\nâŠ¤\nâ€‹\nğ’†\n(\ni\n)\n+\nğ’™\n(\ni\n)\n,\n\\displaystyle=\\beta H(\\bm{x}^{(i)},\\bar{h})H(\\bm{x}^{(i)},\\bar{h})^{\\top}\\bm{e}^{(i)}+\\bm{x}^{(i)},\n(16)\nğ’†\n(\ni\n+\n1\n)\n\\displaystyle\\bm{e}^{(i+1)}\n=\nH\nâ€‹\n(\nğ’™\n(\ni\n)\n,\nh\nÂ¯\n)\nâ€‹\nH\nâ€‹\n(\nğ’™\n(\ni\n)\n,\nh\nÂ¯\n)\nâŠ¤\nâ€‹\nğ’†\n(\ni\n)\nâ€–\nH\nâ€‹\n(\nğ’™\n(\ni\n)\n,\nh\nÂ¯\n)\nâ€‹\nH\nâ€‹\n(\nğ’™\n(\ni\n)\n,\nh\nÂ¯\n)\nâŠ¤\nâ€‹\nğ’†\n(\ni\n)\nâ€–\n2\n,\n\\displaystyle=\\frac{H(\\bm{x}^{(i)},\\bar{h})H(\\bm{x}^{(i)},\\bar{h})^{\\top}\\bm{e}^{(i)}}{||H(\\bm{x}^{(i)},\\bar{h})H(\\bm{x}^{(i)},\\bar{h})^{\\top}\\bm{e}^{(i)}||_{2}},\nP\n(\ni\n+\n1\n)\n\\displaystyle P^{(i+1)}\n=\nP\n(\ni\n)\n+\nÎ²\nâ€‹\np\nâ€‹\n(\nğ’™\n(\ni\n+\n1\n)\n)\n.\n\\displaystyle=P^{(i)}+\\beta p(\\bm{x}^{(i+1)}).\nAutonomous Parameter Selection for Obstacle Exiting\nConstructing virtual obstacles using EFRSs introduces obstacle deformation. For instance, when a human accelerates or decelerates, their EFRS may expand or shrink drastically. MCBF-QP in\n[\n27\n]\nselects the exit tangent vector\nÏ•\nâ€‹\n(\nğ’™\n,\nh\nÂ¯\n)\n\\phi(\\bm{x},\\bar{h})\nusing manually tuned constant parameters for iteration number\nN\nN\nand step size\nÎ²\n\\beta\n. However, using constant\nN\nN\nand\nÎ²\n\\beta\ncauses over-wrapping and under-wrapping issues and outputs inefficient exit strategies\nÏ•\nâ€‹\n(\nğ’™\n,\nh\nÂ¯\n)\n\\phi(\\bm{x},\\bar{h})\nduring the shrinkage or expansion of the EFRS, as shown in Fig.\n3\n.\nWhatâ€™s worse, if the exit strategies selected switch frequently between opposite directions due to improper wrapping, we risk introducing local minima that MCBF-QP intends to eliminate back into the trajectories planned.\nTherefore, to resolve the improper wrapping issue, we propose the autonomous parameter-selection scheme (Algorithm 1) that adapts in real time as the EFRS deforms.\nThe algorithm is motivated by the observation that proper wrapping is achieved whenever\nÎ²\nâ€‹\nN\nâ‰ˆ\nd\ngeo\n\\beta N\\!\\approx\\!d_{\\text{geo}}\n, where\nd\ngeo\nd_{\\text{geo}}\nis the geodesic distance between the robot position\nğƒ\nrob\n\\bm{\\xi}_{\\text{rob}}\nand the target position\nğƒ\ntar\n\\bm{\\xi}_{\\text{tar}}\n. This distance is defined as the length of the shortest path lying entirely on the isosurface\n{\nğƒ\n|\ns\nÂ¯\nâ€‹\n(\nğƒ\n)\n=\ns\nÂ¯\nâ€‹\n(\nğƒ\nrob\n)\n}\n\\{\\bm{\\xi}\\,|\\,\\bar{s}(\\bm{\\xi})\\!=\\!\\bar{s}(\\bm{\\xi}_{\\text{rob}})\\}\nand connects their surface projections\nğƒ\nrob\npr\n\\bm{\\xi}^{\\text{pr}}_{\\text{rob}}\nand\nğƒ\ntar\npr\n\\bm{\\xi}^{\\text{pr}}_{\\text{tar}}\n. Given the correlationship between\nÎ²\n\\beta\nand\nN\nN\n, fixing one while updating the other via approximated\nd\ngeo\nd_{\\text{geo}}\ntrivially ensures proper wrapping.\nIn our framework,\nN\nN\nis fixed since a static iteration count enables JIT compilation of the geodesic-approximation step, yielding substantial computational speedups.\n1\nfunction AutoParamSel\n(\ns\nÂ¯\n\\bar{s}\n,\nN\nN\n,\nğƒ\nrob\n\\bm{\\xi}_{\\text{rob}}\n,\nğƒ\ntar\n\\bm{\\xi}_{\\text{tar}}\n);\n2\nInitialize\nempty distance map\nâ„³\n\\mathcal{M}\n.\n3\nâ„¬\nall\n=\nCONTOUR\n(\nEDGE\n(\ns\nÂ¯\n(\nâ„³\n)\n,\ns\nÂ¯\n(\nğƒ\nrob\n)\n)\n\\mathcal{B}_{\\text{all}}=\\text{CONTOUR}({\\color[rgb]{0,0,0}\\text{EDGE}(\\bar{s}(\\mathcal{M}),\\bar{s}(\\bm{\\xi}_{\\text{rob}})})\n;\n4\nd\nmin\n=\nâˆ\nd_{\\min}=\\infty\n;\n5\nfor\nâ„¬\nâˆˆ\nâ„¬\nall\n\\mathcal{B}\\in\\mathcal{B}_{\\text{all}}\ndo\n6\nğƒ\nrob\npr\n,\nğƒ\ntar\npr\n=\nproj\nâ€‹\n(\n(\nğƒ\nrob\n,\nğƒ\ntar\n)\n,\nâ„¬\n)\n\\bm{\\xi}^{\\text{pr}}_{\\text{rob}},\\bm{\\xi}^{\\text{pr}}_{\\text{tar}}=\\text{proj}((\\bm{\\xi}_{\\text{rob}},\\bm{\\xi}_{\\text{tar}}),\\mathcal{B})\n;\n7\nif\nâ€–\nğ›\nrob\nâˆ’\nğ›\nrob\npr\nâ€–\n2\n<\nd\nmin\n\\|\\bm{\\xi}_{\\text{rob}}-\\bm{\\xi}^{\\text{pr}}_{\\text{rob}}\\|_{2}<d_{\\min}\nthen\n8\nd\nmin\n=\nâ€–\nğƒ\nrob\nâˆ’\nğƒ\nrob\npr\nâ€–\nd_{\\min}=||\\bm{\\xi}_{\\text{rob}}-\\bm{\\xi}^{\\text{pr}}_{\\text{rob}}||\n;\n9\nd\ngeo\n=\nGEO\nâ€‹\n(\nâ„¬\n,\nğƒ\nrob\npr\n,\nğƒ\ntar\npr\n)\nd_{\\text{geo}}=\\text{GEO}(\\mathcal{B},\\bm{\\xi}^{\\text{pr}}_{\\text{rob}},\\bm{\\xi}^{\\text{pr}}_{\\text{tar}})\n;\n10\n11\nend if\n12\n13\nend for\nreturn\nÎ²\n=\nd\ngeo\n/\nN\n\\beta=d_{\\text{geo}}/N\nAlgorithmÂ 1\nAutonomous parameter selection\nInput arguments to the algorithm include the combined DF\ns\nÂ¯\n\\bar{s}\n, iteration number\nN\nN\n, robot position\nğƒ\nrob\n\\bm{\\xi_{\\text{rob}}}\n, and target position\nğƒ\ntar\n\\bm{\\xi_{\\text{tar}}}\n.\nFirstly, the algorithm initializes an empty distance map based on the detectable obstacle set\nQ\nQ\nand a pre-defined resolution. The distance map is then filled with the distances to obstacles computed using combined DF\ns\nÂ¯\n\\bar{s}\n:\ns\nÂ¯\nâ€‹\n(\nğƒ\n)\n=\nâˆ’\n1\nÏ\nâ€‹\nlog\nâ¡\n(\nâˆ‘\no\nâˆˆ\nQ\nexp\nâ¡\n(\nâˆ’\nÏ\nâ€‹\n[\ns\no\nâ€‹\n(\nğƒ\n,\nğ’™\no\n)\n+\n1\n]\n)\n)\nâˆ’\n1\n,\n\\bar{s}(\\bm{\\xi})=-\\frac{1}{\\rho}\\log\\bigg(\\sum_{o\\in Q}\\exp{(-\\rho[s_{o}(\\bm{\\xi},\\bm{x}_{o})+1])}\\bigg)-1,\n(17)\nwhich can be computed given 2D DF\ns\no\nâ€‹\n(\nğƒ\n,\nğ’™\no\n)\ns_{o}(\\bm{\\xi},\\bm{x}_{o})\nfor each obstacle\no\nâˆˆ\nQ\no\\in Q\n.\nSimilar to what we did during EBM postprocessing in Section\nIV-A\n, edge and contour detection is used to extract contours\nâ„¬\nall\n\\mathcal{B}_{\\text{all}}\non the level set\n{\nğƒ\n|\ns\nÂ¯\nâ€‹\n(\nğƒ\n)\n=\ns\nÂ¯\nâ€‹\n(\nğƒ\nrob\n)\n}\n\\{\\bm{\\xi}\\,|\\,\\bar{s}(\\bm{\\xi})=\\bar{s}(\\bm{\\xi}_{\\text{rob}})\\}\nfrom the distance map.\nThe above computation can produce multiple disconnected contours, but only one corresponds to the isoline that the geodesic approximator should follow. In Algorithm 1, we iterate through all the extracted contours and set\nd\ngeo\nd_{\\text{geo}}\nto the geodesic distance on the contour that is closest to the robot position\nğƒ\nrob\n\\bm{\\xi}_{\\text{rob}}\n.\nThe function\nproj\nâ€‹\n(\nâ‹…\n)\n\\text{proj}(\\cdot)\ncalculates the projections of given points\non the contour\n. The function\nGEO\nâ€‹\n(\nâ‹…\n)\n\\text{GEO}(\\cdot)\ncalculates the geodesic distance between two points on a boundary.\nIV-C\nProactive and Adaptive MCBF Formulation\nSummarizing the modifications, the optimization problem for the proposed MCBF-QP variant can be formulated as in Eq.Â (\n20\n). Note that here\nÏ•\nâ€‹\n(\nğ’™\n,\nh\no\n)\n\\phi(\\bm{x},h_{o})\nfrom the standard MCBF-QP constraint (\n13\n) is replaced with\nÏ•\nâ€‹\n(\nğ’™\n,\nh\nÂ¯\n)\n\\phi(\\bm{x},\\bar{h})\nusing the combined barrier function. This change enables MCBF-QPs to ensure local-minimum-free circumvention not only for individual concave obstacles but also for concave obstacle unions formed by dynamic obstacles, like humans, with one another, or with static infrastructure in the environment. Eq.Â (\n19\n) is introduced to prevent the robot from entering reentrant corners\nQ\ng\nQ_{g}\nin between obstacles, defined as\nQ\ng\n=\n{\nğ’™\n:\nh\no\nâ€‹\n(\nğ’™\n,\nğ’™\no\n)\n>\n0\n,\nâˆ€\no\nâˆˆ\nO\nâ€‹\nand\nâ€‹\nh\nÂ¯\nâ€‹\n(\nğ’™\n)\nâ‰¤\n0\n}\nQ_{g}=\\{\\bm{x}:h_{o}(\\bm{x},\\bm{x}_{o})>0,\\forall o\\in O\\text{ and }\\bar{h}(\\bm{x})\\leq 0\\}\n. Robot entering\nQ\ng\nQ_{g}\nwill destabilize the combined DF in (\n17\n) and make the parameter selection in Algorithm\n1\ninaccurate.\nğ’–\nmcbf\n\\displaystyle\\bm{u}_{\\text{mcbf}}\n=\narg\nmin\nğ’–\nâˆˆ\nâ„\nm\n(\nğ’–\nâˆ’\nğ’–\nnom\n)\nâŠ¤\n(\nğ’–\nâˆ’\nğ’–\nnom\n)\n,\n\\displaystyle=\\arg\\min_{\\bm{u}\\in\\mathbb{R}^{m}}\\;(\\bm{u}-\\bm{u}_{\\text{nom}})^{\\top}(\\bm{u}-\\bm{u}_{\\text{nom}}),\ns.t.\nâ„’\nf\nâ€‹\nh\no\n+\nâ„’\ng\nâ€‹\nh\no\nâ€‹\nğ’–\n+\nâˆ‡\nğ’™\no\nh\no\nâŠ¤\nâ€‹\nğ’™\nË™\no\nâ‰¥\nâˆ’\nÎ±\nâ€‹\n(\nh\no\n)\nâ€‹\nâˆ€\no\nâˆˆ\nO\n,\n\\displaystyle\\mathcal{L}_{f}h_{o}+\\mathcal{L}_{g}h_{o}\\bm{u}+\\nabla_{\\bm{x}_{o}}h_{o}^{\\top}\\dot{\\bm{x}}_{o}\\geq-\\alpha\\left(h_{o}\\right)\\,\\forall o\\in O,\n(18)\nâ„’\nf\nâ€‹\nh\nÂ¯\n+\nâ„’\ng\nâ€‹\nh\nÂ¯\nâ€‹\nğ’–\nâ‰¥\nâˆ’\nÎ±\nâ€‹\n(\nh\nÂ¯\n)\n,\n\\displaystyle\\mathcal{L}_{f}\\bar{h}+\\mathcal{L}_{g}\\bar{h}\\bm{u}\\geq-\\alpha\\left(\\bar{h}\\right),\n(19)\nÏ•\nâ€‹\n(\nğ’™\n,\nh\nÂ¯\n)\nâŠ¤\nâ€‹\nf\nâ€‹\n(\nğ’™\n)\n+\nÏ•\nâ€‹\n(\nğ’™\n,\nh\nÂ¯\n)\nâŠ¤\nâ€‹\ng\nâ€‹\n(\nğ’™\n)\nâ€‹\nğ’–\nâ‰¥\nÎ³\n,\n\\displaystyle\\phi(\\bm{x},\\bar{h})^{\\top}f(\\bm{x})+\\phi(\\bm{x},\\bar{h})^{\\top}g(\\bm{x})\\bm{u}\\geq\\gamma,\n(20)\nFigure 4\n:\nHospital (left, middle) and crowd (right) simulation environment setup for robot comparison tests, including the Gazebo world (left) and the static environmental layout in the robotâ€™s perspective (middle, right).\nV\nExperiment\nThe proposed framework is evaluated on a differential-drive Fetch robot across kinematic simulations, Gazebo simulations, and real-world experiments. Four scenarios are designed for kinematic simulations (middle and right images of Fig.\n4\n), featuring hospital and crowd navigation tasks. The robot is required to move from the star-marked initial position to the cross-marked target, under 10 uniformly sampled initial orientations. Each algorithmâ€™s performance is assessed in terms of safety, efficiency, and solver feasibility, as reported in Table\nI\n. The performance of the proposed methods and baselines in hospital environments is further validated in Gazebo simulations (left image of Fig.\n4\n). In both kinematic and Gazebo hospital simulations, i.e., Scenarios 1 to 3, the EBM-based motion predictor is used; while in the crowd navigation task (Scenario 4) and the real-world experiments, the CVM-based motion predictor is used.\nHardware, Computation, and Parameters\n: All runtime is recorded on an Intel Coreâ„¢ i7-12700K Ã— 20 with NVIDIA GeForce RTX 3090 Ti (only for EBMs).\nThe adaptive MCBF loops at 30 Hz while the whole framework runs at 10 Hz, due to all components running in sequence on the same computer. In practice, they can run in different compute nodes, so that the controller can be sped up to the runtime of standard CBF-QP (about 100 Hz).\nAs in\n[\n31\n]\n, the EBM-based motion predictor has a classic UNet architecture\n[\n20\n]\n, and is trained on a synthetic dataset collected from the hospital scenario, containing about 30K data samples from 630 trajectories. Each trajectory is from a simulated pedestrian with\ndifferent motion speeds\nand random motion noise.\nThis motion noise can be regarded as measurement noise or staggering behaviors in reality.\nThe horizon for motion prediction is 20 steps (4 s). The GPDF uses the MatÃ©rn\nÎ½\n=\n1\n/\n2\n\\nu=1/2\nkernel:\nk\no\nâ€‹\n(\nd\n)\n=\nÏƒ\n2\nâ€‹\nexp\nâˆ’\nd\n/\nL\nk_{o}(d)=\\sigma^{2}\\exp{-d/L}\nwith\nÏƒ\n=\n1\n\\sigma=1\nand\nL\n=\n0.2\nL=0.2\n.\nBecause GPDF training scales as\nO\nâ€‹\n(\nn\n3\n)\nO(n^{3})\n[\n5\n]\n, we capped each obstacleâ€™s boundary representation at 200 points during online barrier-function generation. This coarser sampling inevitably smooths small gaps and fine details, but we found that such smoothing is beneficial: it prevents the controller from attempting to navigate through narrow, impractical openings and thus improves overall navigation safety, while still preserving the essential obstacle geometry needed for the robot to plan feasible paths.\nRobot Dynamics\n: The Fetch robot is modeled as a unicycle whose point of interest is\na\na\nmeters ahead of the wheel axis, representing an output transformation of the default model. The model is referred to as\nshifted\nwhen\na\n>\n0\na\\!>\\!0\n, and as\nstandard\nwhen\na\n=\n0\na\\!=\\!0\n. The resulting control-affine dynamics are\nğ’™\nË™\n=\n[\np\nË™\nx\np\nË™\ny\nÎ¸\nË™\n]\n=\n[\ncos\nâ¡\nÎ¸\nâˆ’\na\nâ€‹\nsin\nâ¡\nÎ¸\nsin\nâ¡\nÎ¸\na\nâ€‹\ncos\nâ¡\nÎ¸\n0\n1\n]\nâ€‹\n[\nv\nÏ‰\n]\n.\n\\dot{\\bm{x}}=\\begin{bmatrix}\\dot{p}_{x}\\\\\n\\dot{p}_{y}\\\\\n\\dot{\\theta}\\end{bmatrix}=\\begin{bmatrix}\\cos{\\theta}&-a\\sin{\\theta}\\\\\n\\sin{\\theta}&a\\cos{\\theta}\\\\\n0&1\\end{bmatrix}\\begin{bmatrix}v\\\\\n\\omega\\end{bmatrix}.\n(21)\nFor CBF-QPs and MCBF-QPs used in our experiments and the 2D examples in Fig.\n3\n, we employ the shifted model with\na\n=\n0.2\nâ€‹\nm\na\\!=\\!0.2\\;\\text{m}\n. This transformation is advantageous because the Euclidean DF\ns\no\nâ€‹\n(\nğƒ\n,\nğ’™\no\n)\ns_{o}(\\bm{\\xi},\\bm{x}_{o})\nto the robot depends directly on the control inputs\n(\nv\n,\nÏ‰\n)\n(v,\\omega)\nthrough their first time derivative, enabling its direct use as CBF without auxiliary dynamics or differentiation.\nHowever, not all underactuated control-affine systems admit such a shift; many require DF augmentation to construct relative-degree-one CBFs. Therefore, we further evaluate the proposed autonomous parameter selection algorithm on the standard unicycle model (\na\n=\n0\na=0\n) with augmented CBFs (A-CBFs) in the 3D examples of Fig.\n3\n, demonstrating the frameworkâ€™s theoretical applicability to general control-affine systems.\nBarrier Function Designs\n: In unicycle kinematics,\nğƒ\n=\n[\np\nx\n,\np\ny\n]\nâŠ¤\n\\bm{\\xi}=[p_{x},p_{y}]^{\\top}\nand\nğ’™\n=\n[\np\nx\n,\np\ny\n,\nÎ¸\n]\nâŠ¤\n\\bm{x}=[p_{x},p_{y},\\theta]^{\\top}\n.\nThus, the barrier function\nh\no\nh_{o}\nfor shifted unicycle model can be adopted from\ns\no\ns_{o}\nas\nh\no\nâ€‹\n(\nğ’™\n,\nğ’™\no\n)\n=\nh\no\nâ€‹\n(\nğƒ\n,\nğ’™\no\n)\n=\ns\no\nâ€‹\n(\nğƒ\n,\nğ’™\no\n)\n.\nh_{o}(\\bm{x},\\bm{x}_{o})=h_{o}{\\color[rgb]{0,0,0}(\\bm{\\xi},\\bm{x}_{o})}={\\color[rgb]{0,0,0}s_{o}}(\\bm{\\xi},\\bm{x}_{o}).\n(22)\nSince the partial derivatives of\ns\no\ns_{o}\nwith respect to\nÎ¸\n\\theta\nare all zeros, the corresponding CBF constraints can be written as\nâˆ‡\nğƒ\nh\no\nâ€‹\n(\nğƒ\n,\nğ’™\no\n)\nâŠ¤\nâ€‹\nğƒ\nË™\n+\nâˆ‡\nğ’™\no\nh\no\nâ€‹\n(\nğƒ\n,\nğ’™\no\n)\nâŠ¤\nâ€‹\nğ’™\nË™\no\nâ‰¥\nâˆ’\nÎ±\nâ€‹\n(\nh\no\nâ€‹\n(\nğƒ\n,\nğ’™\no\n)\n)\n.\n\\displaystyle{\\color[rgb]{0,0,0}\\nabla_{\\bm{\\xi}}h_{o}(\\bm{\\xi},\\bm{x}_{o})^{\\top}\\dot{\\bm{\\xi}}+\\nabla_{\\bm{x}_{o}}h_{o}(\\bm{\\xi},\\bm{x}_{o})^{\\top}\\dot{\\bm{x}}_{o}\\geq-\\alpha({\\color[rgb]{0,0,0}h_{o}}(\\bm{\\xi},\\bm{x}_{o})).}\nFor standard model, we formulate our adaptive MCBF-QP using A-CBF\nh\naug\nâ€‹\n(\nğ’™\n,\nğ’™\no\n)\nh_{\\text{aug}}(\\bm{x},\\bm{x}_{o})\nas follows, where\nw\nâˆˆ\nâ„\n+\nw\\in\\mathbb{R}^{+}\n[\n27\n]\n.\nh\naug\nâ€‹\n(\nğ’™\n,\nğ’™\no\n)\n=\ns\no\nâ€‹\n(\nğƒ\n,\nğ’™\no\n)\n+\nw\nâ€‹\nâˆ‡\nğƒ\ns\no\nâ€‹\n(\nğƒ\n,\nğ’™\no\n)\nâŠ¤\nâ€‹\n[\ncos\nâ¡\nÎ¸\nsin\nâ¡\nÎ¸\n]\n\\displaystyle{\\color[rgb]{0,0,0}h_{\\text{aug}}(\\bm{x},\\bm{x}_{o})}={\\color[rgb]{0,0,0}s_{o}}(\\bm{\\xi},\\bm{x}_{o})+w\\nabla_{\\bm{\\xi}}{\\color[rgb]{0,0,0}s_{o}}(\\bm{\\xi},\\bm{x}_{o})^{\\top}\\begin{bmatrix}\\cos{\\theta}\\\\\n\\sin{\\theta}\\end{bmatrix}\n(23)\nNote that the geodesic approximation of A-CBFs is performed in a high-dimensional non-Euclidean space, as visualized by the 3D cases in Fig.\n3\n. A-CBF\nconstraints in CBF-QP and MCBF-QP can be obtained by substituting\nh\no\n=\nh\naug\nâ€‹\n(\nx\n,\nğ’™\no\n)\nh_{o}=h_{\\text{aug}}(x,\\bm{x}_{o})\ndirectly into the CBF constraint inequality in Eq.Â (\n12\n), and the combined barrier function computation in (\n14\n).\nNominal controller\n: In all experiments and figures in this paper, the nominal controllers are approximated from the linear dynamical systems\nğ’–\nnom\nl\n=\nğƒ\nâˆ—\nâˆ’\nğƒ\nâ€–\nğƒ\nâˆ—\nâˆ’\nğƒ\nâ€–\n\\bm{u}_{\\text{nom}}^{l}=\\frac{\\bm{\\xi}^{*}-\\bm{\\xi}}{||\\bm{\\xi}^{*}-\\bm{\\xi}||}\nas in (\n24\n), where\nğƒ\n\\bm{\\xi}\nis the robot position,\nğƒ\nâˆ—\n\\bm{\\xi}^{*}\nis the target position,\nÏˆ\n\\psi\nis the angle difference between the current robot pose\nÎ¸\n\\theta\nand the desired robot pose estimated using the orientation of\nğ’–\nnom\nl\n\\bm{u}_{\\text{nom}}^{l}\n, and\nÎ”\nâ€‹\nt\n\\Delta t\nis the sampling time of the nominal controller. The approximation is not exact due to the non-holonomic property of differential drive systems.\nv\nnom\n=\nâ€–\nu\nnom\nl\nâ€–\n2\n,\nÏ‰\nnom\n=\nÏˆ\n/\nÎ”\nâ€‹\nt\nv_{\\text{nom}}=||u_{\\text{nom}}^{l}||_{2},\\quad\\omega_{\\text{nom}}=\\psi/\\Delta t\n(24)\nTABLE I\n:\nEvaluation of different methods in hospital (Scenarios 1-3) and social navigation (Scenario 4). Ten runs were conducted for each scenario.\nRuntime (s)\nScenarios 1 / 2 / 3 / 4\nTimespan (s)\nMethod\nMean\nStd\nSafety #\nSuccess #\nInfeasibility #\nMean\nMPPI\n0.028\n0.011\n10 / 10 / 0 / 10\n0 / 0 / 9 / 10\n0 / 0 / 0 / 0\nâ€“ / â€“ / 18.4 / 23.7\nCBF\n0.010\n0.009\n10 / 10 / 10 / 2\n0 / 10 / 9 / 10\n0 / 1 / 0 / 69\nâ€“ / 28.9 / 25.0 / 16.3\nMCBF\n0.018\n0.009\n2 / 5 / 4 / 0\n10 / 4 / 10 / 10\n59 / 426 / 42 / 122\n25.0 / 19.3 / 13.2 / 13.4\nMMP-MPC\n0.066\n0.046\n3 / 0 / 0 / 0\n0 / 1 / 6 / 4\n0 / 0 / 0 / 0\nâ€“ / 33.6 / 12.5 / 14.2\nMMP-MPPI\n0.045\n0.005\n10 / 10 / 10 / 10\n0 / 0 / 10 / 10\n0 / 0 / 0 / 0\nâ€“ / â€“ / 16.1 / 22.5\nMMP-CBF\n0.010\n0.007\n10 / 10 / 1 / 10\n1 / 5 / 9 / 10\n0 / 317 / 77 / 0\n26.1 / 34.0 / 12.9 / 9.8\nMMP-MCBF (ours)\n0.036\n0.018\n10 / 10 / 10 / 10\n10 / 10 / 10 / 10\n10 / 0 / 0 / 0\n31.0 / 19.3 / 15.5 / 9.6\nMetrics\n: The evaluation in\nTableÂ I\ncontains the following aspects: â€œSafety #â€ and â€œSuccess #â€ show the number of cases where the robot did not collide with obstacles, and reached the assigned goals out of ten runs in each scenario. â€œInfeasibility #â€ denotes the number of time steps per trajectory (out of 800) in which the optimization solver fails to find a safety-feasible solution. â€œTimespanâ€ is the average duration of the goal-reached trajectories.\nResult Analysis\n:\nThe proposed approach is evaluated against existing safe local planners, including MPC, MPPI, CBF-QP, and MCBF-QP. As an ablation study, we compare them with and without motion prediction.\nFor real-time performance, the penalty-based MPC is constrained to 0.1s in all experiments.\nAs shown in\nTableÂ I\n, pairing motion prediction with the adaptive MCBF-QP yields collision-free navigation with high target-reaching rates in dense dynamic concave environments. This integration substantially improves the baseline MCBF-QP by preventing unsafe attempts to pass through narrow gaps when humans approach. Although integrating motion prediction with MPC, MPPI, and CBF-QP increases their safety margins, they usually fail to generate alternative safe routes without the exit-force guidance inherent to MCBF-QP. While MPC can succeed in concave environments\n[\n29\n]\n, doing so typically requires careful initialization via computationally expensive global planners. In terms of efficiency, MMP-MCBF yields the shortest average collision-free travel time. MMP-CBF and MCBF-QP produce slightly shorter paths in Scenarios 1 and 3, but at the cost of higher collision rates or reduced target-reaching success.\nWe further validated the effectiveness of our proposed framework using real-world crowd navigation experiments, as shown in Fig.\n5\n. The hardware experiments reinforce our observations from simulations that MMP-MCBF can circumvent obstacles more proactively than standard MCBF-QPs and CBF-QPs, and induce fewer robot freezing points than MMP-MPC and MMP-CBF.\nDiscussion\n: In the current algorithm, we formulate the robotâ€™s safety as a continuous-time deterministic optimization problem. In comparison to standard CBF-QPs, introducing EFRS as obstacles shrinks the safe regions for the robot and can subject the controller to solver infeasibility issues if the prediction length value\nÏ„\nmax\n\\tau_{\\max}\nis too large.\nIn the experiments, the prediction horizon\nÏ„\nmax\n\\tau_{\\max}\nis set to 4 seconds to balance reactivity and safety: a longer horizon may lead to overly conservative behavior and freezing robots, while a shorter horizon may provide insufficient time for the robot to react.\nDuring the experiments, short-term abnormal noise and occasional unusual motion behaviors do not lead to collisions or solver failure, and the robot can continue smoothly afterwards. However, long-term anomaliesâ€”such as sensor failure or intentional obstructionâ€”can invalidate motion prediction and therefore require dedicated anomaly detection mechanisms and additional safety modules.\nFuture work on reformulating the problem using a stochastic system or enabling online adaptation of prediction length\nÏ„\nmax\n\\tau_{\\max}\ncould alleviate infeasibility issues\nand offer better navigation efficiency\n.\nAdditionally, the robot is given access to the full obstacle geometry once an obstacle enters the detection range, which might be unrealistic due to limited sensor field of view, occlusions, and incomplete perception. Since the autonomous parameter selection algorithm provides a foundation for MCBF-QP in environments with dynamically deforming obstacles, the proposed controller has the potential to adapt online to partial and evolving obstacle information by treating gradually observed obstacles as deforming. A natural future work is to integrate this framework with a real perception pipeline that incrementally constructs obstacle representations from partial observations.\n(a)\nMPC, with prediction\n(b)\nCBF, with prediction\n(c)\nMCBF, no prediction\n(d)\nMCBF, with prediction\nFigure 5\n:\nReal-world experiments. A Fetch robot avoids three pedestrians approaching in a U-shape formation. Full video attached.\nVI\nConclusion\nIn this work, we proposed a safe and efficient mobile robot navigation pipeline, named MMP-MCBF, based on the integration of motion predictions of dynamic obstacles and an improved on-manifold control barrier function method, which enables mobile robots to avoid dynamic obstacles proactively. To consider motion prediction in the control barrier function framework, we further improved the on-manifold MCBF-QP algorithm for adaptive and autonomous parameter searching. Apart from the traditional CVM-based prediction, a learning-based EBM motion predictor is investigated in this pipeline to consider multimodal motion prediction for more comprehensive and flexible prediction. From both simulated scenarios and real-world experiments, the proposed MMP-MCBF approach outperforms other popular obstacle avoidance approaches, shown to be safe and efficient in complex and dynamic environments, especially with the presence of non-convex static or dynamic obstacles.\nReferences\n[1]\nA. D. Ames, S. Coogan, M. Egerstedt, G. Notomista, K. Sreenath, and P. Tabuada\n(2019)\nControl barrier functions: theory and applications\n.\nIn\nEuropean control conference (ECC)\n,\npp.Â 3420â€“3431\n.\nCited by:\nÂ§I\n,\nÂ§II\n.\n[2]\nA. Billard, S. Mirrazavi, and N. Figueroa\n(2022)\nLearning for adaptive and reactive robot control: a dynamical systems approach\n.\nMIT Press\n.\nCited by:\nÂ§I\n.\n[3]\nJ. Breeden and D. Panagou\n(2022)\nPredictive control barrier functions for online safety critical control\n.\nIn\nConference on Decision and Control (CDC)\n,\npp.Â 924â€“931\n.\nExternal Links:\nDocument\nCited by:\nÂ§I\n.\n[4]\nK. Ceder, Z. Zhang, A. Burman, I. Kuangaliyev, K. Mattsson, G. Nyman, A. PetersÃ©n, L. Wisell, and K. Ã…kesson\n(2024)\nBirdâ€™s-eye-view trajectory planning of multiple robots using continuous deep reinforcement learning and model predictive control\n.\nIn\nIROS\n,\npp.Â 8002â€“8008\n.\nExternal Links:\nDocument\nCited by:\nÂ§I\n.\n[5]\nH. J. Choi and N. Figueroa\n(2024)\nTowards feasible dynamic grasping: leveraging gaussian process distance field, se(3) equivariance, and riemannian mixture models\n.\nIn\nICRA\n,\npp.Â 6455â€“6461\n.\nExternal Links:\nDocument\nCited by:\nÂ§\nIII-B\n,\nÂ§V\n.\n[6]\nN. Correll, B. Hayes, C. Heckman, and A. Roncone\n(2022)\nIntroduction to autonomous robots: mechanisms, sensors, actuators, and algorithms\n.\nMIT Press\n.\nCited by:\nÂ§I\n.\n[7]\nR. K. Cosner, P. Culbertson, A. J. Taylor, and A. D. Ames\n(2023)\nRobust safety under stochastic uncertainty with discrete-time control barrier functions\n.\nIn\nRobotics: Science and Systems (RSS)\n,\npp.Â 1â€“11\n.\nCited by:\nÂ§I\n.\n[8]\nC. K. Fourie, N. Figueroa, and J. A. Shah\n(2024)\nOn-manifold strategies for reactive dynamical system modulation with nonconvex obstacles\n.\nIEEE Transactions on Robotics\n40\n(\n),\npp.Â 2390â€“2409\n.\nExternal Links:\nDocument\nCited by:\nÂ§I\n,\nÂ§\nIII-C\n,\nÂ§\nIII-C\n,\nÂ§\nIV-B\n,\nÂ§\nIV-B\n.\n[9]\nR. Grandia, A. J. Taylor, A. D. Ames, and M. Hutter\n(2021)\nMulti-layered safety for legged robots via control barrier functions and model predictive control\n.\nIn\nICRA\n,\nVol.\n,\npp.Â 8352â€“8358\n.\nExternal Links:\nDocument\nCited by:\nÂ§I\n.\n[10]\nL. Heuer, L. Palmieri, A. Rudenko, A. Mannucci, M. Magnusson, and K. O. Arras\n(2023)\nProactive model predictive control with multi-modal human motion prediction in cluttered dynamic environments\n.\nIn\nIROS\n,\npp.Â 229â€“236\n.\nCited by:\nÂ§I\n.\n[11]\nL. Huber, A. Billard, and J. Slotine\n(2019)\nAvoidance of convex and concave obstacles with convergence ensured through contraction\n.\nIEEE Robotics and Automation Letters\n4\n(\n2\n),\npp.Â 1462â€“1469\n.\nExternal Links:\nDocument\nCited by:\nÂ§\nIII-C\n.\n[12]\nL. Huber, J. Slotine, and A. Billard\n(2022)\nAvoiding dense and dynamic obstacles in enclosed spaces: application to moving in crowds\n.\nIEEE Transactions on Robotics\n38\n(\n5\n),\npp.Â 3113â€“3132\n.\nCited by:\nÂ§I\n.\n[13]\nZ. Jian, Z. Yan, X. Lei, Z. Lu, B. Lan, X. Wang, and B. Liang\n(2023)\nDynamic control barrier function-based model predictive control to safety-critical obstacle-avoidance of mobile robot\n.\nIn\nICRA\n,\npp.Â 3679â€“3685\n.\nExternal Links:\nDocument\nCited by:\nÂ§I\n.\n[14]\nC. Le Gentil, O. Ouabi, L. Wu, C. Pradalier, and T. Vidal-Calleja\n(2023)\nAccurate Gaussian-process-based distance fields with applications to echolocation and mapping\n.\nIEEE Robotics and Automation Letters\n9\n(\n2\n),\npp.Â 1365â€“1372\n.\nCited by:\nÂ§\nIII-B\n.\n[15]\nY. LeCun, S. Chopra, R. Hadsell, M. Ranzato, F. Huang,\net al.\n(2006)\nA tutorial on energy-based learning\n.\nPredicting structured data\n.\nCited by:\nÂ§\nIII-A\n.\n[16]\nC. Mavrogiannis, F. Baldini, A. Wang, D. Zhao, P. Trautman, A. Steinfeld, and J. Oh\n(2023)\nCore challenges of social robot navigation: a survey\n.\nACM Transactions on Human-Robot Interaction\n12\n(\n3\n),\npp.Â 1â€“39\n.\nCited by:\nÂ§I\n.\n[17]\nH. Oleynikova, A. Millane, Z. Taylor, E. Galceran, J. Nieto, and R. Siegwart\n(2016)\nSigned distance fields: a natural representation for both mapping and planning\n.\nIn\nRSS workshop: geometry and beyond-representations, physics, and scene understanding for robotics\n,\nCited by:\nÂ§II\n.\n[18]\nM. F. Reis, A. P. Aguiar, and P. Tabuada\n(2021)\nControl barrier function-based quadratic programs introduce undesirable asymptotically stable equilibria\n.\nIEEE Control Systems Letters\n5\n(\n2\n),\npp.Â 731â€“736\n.\nExternal Links:\nDocument\nCited by:\nÂ§\nIII-C\n.\n[19]\nJ. Rios-Martinez, A. Spalanzani, and C. Laugier\n(2015)\nFrom proxemics theory to socially-aware navigation: a survey\n.\nInternational Journal of Social Robotics\n7\n,\npp.Â 137â€“153\n.\nCited by:\nÂ§\nIV-A\n.\n[20]\nO. Ronneberger, P. Fischer, and T. Brox\n(2015)\nU-Net: convolutional networks for biomedical image segmentation\n.\nIn\nMedical image computing and computer-assisted intervention\n,\npp.Â 234â€“241\n.\nCited by:\nÂ§V\n.\n[21]\nS. Samavi, J. R. Han, F. Shkurti, and A. P. Schoellig\n(2024)\nSICNav: safe and interactive crowd navigation using model predictive control and bilevel optimization\n.\nIEEE Transactions on Robotics\n.\nCited by:\nÂ§I\n.\n[22]\nC. SchÃ¶ller, V. Aravantinos, F. Lay, and A. Knoll\n(2020)\nWhat the constant velocity model can teach us about pedestrian motion prediction\n.\nIEEE Robotics and Automation Letters\n5\n(\n2\n),\npp.Â 1696â€“1703\n.\nCited by:\nÂ§I\n,\nÂ§\nIII-A\n.\n[23]\nL. Tai, G. Paolo, and M. Liu\n(2017)\nVirtual-to-real deep reinforcement learning: continuous control of mobile robots for mapless navigation\n.\nIn\nIROS\n,\npp.Â 31â€“36\n.\nExternal Links:\nDocument\nCited by:\nÂ§I\n.\n[24]\nG. Williams, P. Drews, B. Goldfain, J. M. Rehg, and E. A. Theodorou\n(2016)\nAggressive driving with model predictive path integral control\n.\nIn\n2016 IEEE International Conference on Robotics and Automation (ICRA)\n,\nVol.\n,\npp.Â 1433â€“1440\n.\nExternal Links:\nDocument\nCited by:\nÂ§I\n.\n[25]\nW. Xiao, C. Belta, and C. G. Cassandras\n(2022)\nAdaptive control barrier functions\n.\nIEEE Transactions on Automatic Control\n67\n(\n5\n),\npp.Â 2267â€“2281\n.\nExternal Links:\nDocument\nCited by:\nÂ§I\n.\n[26]\nZ. Xu, B. Liu, X. Xiao, A. Nair, and P. Stone\n(2023)\nBenchmarking reinforcement learning techniques for autonomous navigation\n.\nIn\nICRA\n,\npp.Â 9224â€“9230\n.\nExternal Links:\nDocument\nCited by:\nÂ§I\n.\n[27]\nY. Xue and N. Figueroa\n(2025)\nNo minima, no collisions: combining modulation and control barrier function strategies for feasible dynamical collision avoidance\n.\narXiv preprint:2502.14238\n.\nCited by:\nÂ§I\n,\nÂ§II\n,\nÂ§\nIII-C\n,\nÂ§\nIII-C\n,\nÂ§\nIV-B\n,\nÂ§\nIV-B\n,\nÂ§V\n.\n[28]\nJ. Zeng, B. Zhang, and K. Sreenath\n(2021)\nSafety-critical model predictive control with discrete-time control barrier function\n.\nIn\nAmerican Control Conference (ACC)\n,\nVol.\n,\npp.Â 3882â€“3889\n.\nExternal Links:\nDocument\nCited by:\nÂ§I\n.\n[29]\nX. Zhang, A. Liniger, and F. Borrelli\n(2021)\nOptimization-based collision avoidance\n.\nIEEE Transactions on Control Systems Technology\n29\n(\n3\n),\npp.Â 972â€“983\n.\nExternal Links:\nDocument\nCited by:\nÂ§V\n.\n[30]\nZ. Zhang, H. Hajieghrary, E. Dean, and K. Ã…kesson\n(2023)\nPrescient collision-free navigation of mobile robots with iterative multimodal motion prediction of dynamic obstacles\n.\nIEEE Robotics and Automation Letters\n8\n(\n9\n),\npp.Â 5488â€“5495\n.\nExternal Links:\nDocument\nCited by:\nÂ§I\n,\nÂ§II\n.\n[31]\nZ. Zhang, G. Hess, J. Hu, E. Dean, L. Svensson, and K. Ã…kesson\n(2025)\nFuture-oriented navigation: dynamic obstacle avoidance with one-shot energy-based multimodal motion prediction\n.\nIEEE Robotics and Automation Letters\n,\npp.Â 1â€“8\n.\nExternal Links:\nDocument\nCited by:\nÂ§I\n,\nÂ§\nIII-A\n,\nÂ§V\n.",
    "preview_text": "This work addresses the challenge of safe and efficient mobile robot navigation in complex dynamic environments with concave moving obstacles. Reactive safe controllers like Control Barrier Functions (CBFs) design obstacle avoidance strategies based only on the current states of the obstacles, risking future collisions. To alleviate this problem, we use Gaussian processes to learn barrier functions online from multimodal motion predictions of obstacles generated by neural networks trained with energy-based learning. The learned barrier functions are then fed into quadratic programs using modulated CBFs (MCBFs), a local-minimum-free version of CBFs, to achieve safe and efficient navigation. The proposed framework makes two key contributions. First, it develops a prediction-to-barrier function online learning pipeline. Second, it introduces an autonomous parameter tuning algorithm that adapts MCBFs to deforming, prediction-based barrier functions. The framework is evaluated in both simulations and real-world experiments, consistently outperforming baselines and demonstrating superior safety and efficiency in crowded dynamic environments.\n\nProactive Local-Minima-Free Robot Navigation: Blending Motion Prediction with Safe Control\nYifan Xue\n1â€ \n, Ze Zhang\n2,â€ \n, Knut Ã…kesson\n2\nandÂ Nadia Figueroa\n1\nâ€ \nThese authors contributed equally to this work.\n1\nY. Xue and N. Figueroa are with the Department of Mechanical Engineering and Applied Mechanics, University of Pennsylvania, Philadelphia, PA 19104 USA\n{yifanxue, nadiafig}@seas.upenn.edu\n,\n2\nZ. Zhang and K. Ã…kesson are with the Department of Mechanical Engineering and Applied Mechanics, Chalmers University of Technology, SE-412 96 Gothenburg, Sweden\n{zhze, knut.akesson}@chalmers.se\nAbstract\nThis work addresses the challenge of safe and efficient mobile robot navigation in complex dynamic environments with concave moving obstacles. Reactive safe controllers like Control Barrier Functions (CBFs) design obstacle avoidance strategie",
    "is_relevant": true,
    "relevance_score": 4.0,
    "extracted_keywords": [
        "Reinforcement Learning",
        "locomotion",
        "whole body control"
    ],
    "one_line_summary": "è¯¥è®ºæ–‡æå‡ºäº†ä¸€ç§ç»“åˆè¿åŠ¨é¢„æµ‹å’Œå®‰å…¨æ§åˆ¶çš„æœºå™¨äººå¯¼èˆªæ¡†æ¶ï¼Œä½¿ç”¨é«˜æ–¯è¿‡ç¨‹å’Œè°ƒåˆ¶æ§åˆ¶å±éšœå‡½æ•°å®ç°åŠ¨æ€ç¯å¢ƒä¸­çš„å®‰å…¨é«˜æ•ˆå¯¼èˆªã€‚",
    "detailed_summary": "",
    "qa_pairs": [],
    "is_hidden": false,
    "is_starred": false,
    "flag": true,
    "published_date": "2026-01-15T09:46:03Z",
    "created_at": "2026-01-20T17:49:54.657252",
    "updated_at": "2026-01-20T17:49:54.657262"
}